{
  "version": 3,
  "sources": ["../../../../../../../../../node_modules/openapi-typescript-fetch/dist/cjs/types.js", "../../../../../../../../../node_modules/openapi-typescript-fetch/dist/cjs/fetcher.js", "../../../../../../../../../node_modules/openapi-typescript-fetch/dist/cjs/utils.js", "../../../../../../../../../node_modules/openapi-typescript-fetch/dist/cjs/index.js", "../../../../../../../../../node_modules/platform/platform.js", "../../../../../../../../../node_modules/normalize-path/index.js", "../../../../../../../../../node_modules/ws/lib/constants.js", "../../../../../../../../../node_modules/ws/lib/buffer-util.js", "../../../../../../../../../node_modules/ws/lib/limiter.js", "../../../../../../../../../node_modules/ws/lib/permessage-deflate.js", "../../../../../../../../../node_modules/ws/lib/validation.js", "../../../../../../../../../node_modules/ws/lib/receiver.js", "../../../../../../../../../node_modules/ws/lib/sender.js", "../../../../../../../../../node_modules/ws/lib/event-target.js", "../../../../../../../../../node_modules/ws/lib/extension.js", "../../../../../../../../../node_modules/ws/lib/websocket.js", "../../../../../../../../../node_modules/ws/lib/stream.js", "../../../../../../../../../node_modules/ws/lib/subprotocol.js", "../../../../../../../../../node_modules/ws/lib/websocket-server.js", "../../../../../../../../../node_modules/ws/index.js", "../../../../../../../../../node_modules/isomorphic-ws/node.js", "../../../../../../../../../node_modules/path-browserify/index.js", "../../../../../../../../../node_modules/@e2b/sdk/src/index.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/api/index.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/constants.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/api/metadata.ts", "../../../../../../../../../node_modules/@e2b/sdk/package.json", "../../../../../../../../../node_modules/@e2b/sdk/src/sandbox/terminal.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/utils/timeout.js", "../../../../../../../../../node_modules/@e2b/sdk/src/utils/promise.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/sandbox/filesystem.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/sandbox/filesystemWatcher.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/sandbox/process.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/sandbox/index.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/utils/id.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/sandbox/codeSnippet.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/sandbox/rpc.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/utils/wait.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/error.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/utils/apiKey.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/sandbox/sandboxConnection.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/utils/filesystem.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/templates/openai.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/runCode.ts", "../../../../../../../../../node_modules/@e2b/sdk/src/templates/dataAnalysis.ts", "../../../../../../../../../trigger/run-command.ts"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ApiError = void 0;\nconst never = Symbol();\nclass ApiError extends Error {\n    constructor(response) {\n        super(response.statusText);\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"url\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"statusText\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"data\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.setPrototypeOf(this, new.target.prototype);\n        this.headers = response.headers;\n        this.url = response.url;\n        this.status = response.status;\n        this.statusText = response.statusText;\n        this.data = response.data;\n    }\n}\nexports.ApiError = ApiError;\n", "\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Fetcher = void 0;\nconst types_1 = require(\"./types\");\nconst sendBody = (method) => method === 'post' ||\n    method === 'put' ||\n    method === 'patch' ||\n    method === 'delete';\nfunction queryString(params) {\n    const qs = [];\n    const encode = (key, value) => `${encodeURIComponent(key)}=${encodeURIComponent(String(value))}`;\n    Object.keys(params).forEach((key) => {\n        const value = params[key];\n        if (value != null) {\n            if (Array.isArray(value)) {\n                value.forEach((value) => qs.push(encode(key, value)));\n            }\n            else {\n                qs.push(encode(key, value));\n            }\n        }\n    });\n    if (qs.length > 0) {\n        return `?${qs.join('&')}`;\n    }\n    return '';\n}\nfunction getPath(path, payload) {\n    return path.replace(/\\{([^}]+)\\}/g, (_, key) => {\n        const value = encodeURIComponent(payload[key]);\n        delete payload[key];\n        return value;\n    });\n}\nfunction getQuery(method, payload, query) {\n    let queryObj = {};\n    if (sendBody(method)) {\n        query.forEach((key) => {\n            queryObj[key] = payload[key];\n            delete payload[key];\n        });\n    }\n    else {\n        queryObj = Object.assign({}, payload);\n    }\n    return queryString(queryObj);\n}\nfunction getHeaders(body, init) {\n    const headers = new Headers(init);\n    if (body !== undefined && !headers.has('Content-Type')) {\n        headers.append('Content-Type', 'application/json');\n    }\n    if (!headers.has('Accept')) {\n        headers.append('Accept', 'application/json');\n    }\n    return headers;\n}\nfunction getBody(method, payload) {\n    const body = sendBody(method) ? JSON.stringify(payload) : undefined;\n    return method === 'delete' && body === '{}' ? undefined : body;\n}\nfunction mergeRequestInit(first, second) {\n    const headers = new Headers(first === null || first === void 0 ? void 0 : first.headers);\n    const other = new Headers(second === null || second === void 0 ? void 0 : second.headers);\n    for (const key of other.keys()) {\n        const value = other.get(key);\n        if (value != null) {\n            headers.set(key, value);\n        }\n    }\n    return Object.assign(Object.assign(Object.assign({}, first), second), { headers });\n}\nfunction getFetchParams(request) {\n    var _a;\n    const payload = Object.assign(Array.isArray(request.payload) ? [] : {}, request.payload);\n    const path = getPath(request.path, payload);\n    const query = getQuery(request.method, payload, request.queryParams);\n    const body = getBody(request.method, payload);\n    const headers = getHeaders(body, (_a = request.init) === null || _a === void 0 ? void 0 : _a.headers);\n    const url = request.baseUrl + path + query;\n    const init = Object.assign(Object.assign({}, request.init), { method: request.method.toUpperCase(), headers,\n        body });\n    return { url, init };\n}\nfunction getResponseData(response) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const contentType = response.headers.get('content-type');\n        if (response.status === 204) {\n            return undefined;\n        }\n        if (contentType && contentType.indexOf('application/json') !== -1) {\n            return yield response.json();\n        }\n        const text = yield response.text();\n        try {\n            return JSON.parse(text);\n        }\n        catch (e) {\n            return text;\n        }\n    });\n}\nfunction fetchJson(url, init) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const response = yield fetch(url, init);\n        const data = yield getResponseData(response);\n        const result = {\n            headers: response.headers,\n            url: response.url,\n            ok: response.ok,\n            status: response.status,\n            statusText: response.statusText,\n            data,\n        };\n        if (result.ok) {\n            return result;\n        }\n        throw new types_1.ApiError(result);\n    });\n}\nfunction wrapMiddlewares(middlewares, fetch) {\n    const handler = (index, url, init) => __awaiter(this, void 0, void 0, function* () {\n        if (middlewares == null || index === middlewares.length) {\n            return fetch(url, init);\n        }\n        const current = middlewares[index];\n        return yield current(url, init, (nextUrl, nextInit) => handler(index + 1, nextUrl, nextInit));\n    });\n    return (url, init) => handler(0, url, init);\n}\nfunction fetchUrl(request) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { url, init } = getFetchParams(request);\n        const response = yield request.fetch(url, init);\n        return response;\n    });\n}\nfunction createFetch(fetch) {\n    const fun = (payload, init) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            return yield fetch(payload, init);\n        }\n        catch (err) {\n            if (err instanceof types_1.ApiError) {\n                throw new fun.Error(err);\n            }\n            throw err;\n        }\n    });\n    fun.Error = class extends types_1.ApiError {\n        constructor(error) {\n            super(error);\n            Object.setPrototypeOf(this, new.target.prototype);\n        }\n        getActualType() {\n            return {\n                status: this.status,\n                data: this.data,\n            };\n        }\n    };\n    return fun;\n}\nfunction fetcher() {\n    let baseUrl = '';\n    let defaultInit = {};\n    const middlewares = [];\n    const fetch = wrapMiddlewares(middlewares, fetchJson);\n    return {\n        configure: (config) => {\n            baseUrl = config.baseUrl || '';\n            defaultInit = config.init || {};\n            middlewares.splice(0);\n            middlewares.push(...(config.use || []));\n        },\n        use: (mw) => middlewares.push(mw),\n        path: (path) => ({\n            method: (method) => ({\n                create: ((queryParams) => createFetch((payload, init) => fetchUrl({\n                    baseUrl: baseUrl || '',\n                    path: path,\n                    method: method,\n                    queryParams: Object.keys(queryParams || {}),\n                    payload,\n                    init: mergeRequestInit(defaultInit, init),\n                    fetch,\n                }))),\n            }),\n        }),\n    };\n}\nexports.Fetcher = {\n    for: () => fetcher(),\n};\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayRequestBody = void 0;\nfunction arrayRequestBody(array, params) {\n    return Object.assign([...array], params);\n}\nexports.arrayRequestBody = arrayRequestBody;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayRequestBody = exports.ApiError = exports.Fetcher = void 0;\nconst fetcher_1 = require(\"./fetcher\");\nObject.defineProperty(exports, \"Fetcher\", { enumerable: true, get: function () { return fetcher_1.Fetcher; } });\nconst utils_1 = require(\"./utils\");\nObject.defineProperty(exports, \"arrayRequestBody\", { enumerable: true, get: function () { return utils_1.arrayRequestBody; } });\nconst types_1 = require(\"./types\");\nObject.defineProperty(exports, \"ApiError\", { enumerable: true, get: function () { return types_1.ApiError; } });\n", "/*!\n * Platform.js v1.3.6\n * Copyright 2014-2020 Benjamin Tan\n * Copyright 2011-2013 John-David Dalton\n * Available under MIT license\n */\n;(function() {\n  'use strict';\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used as a reference to the global object. */\n  var root = (objectTypes[typeof window] && window) || this;\n\n  /** Backup possible global object. */\n  var oldRoot = root;\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root`. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /**\n   * Used as the maximum length of an array-like object.\n   * See the [ES6 spec](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength)\n   * for more details.\n   */\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n\n  /** Regular expression to detect Opera. */\n  var reOpera = /\\bOpera/;\n\n  /** Possible global object. */\n  var thisBinding = this;\n\n  /** Used for native method references. */\n  var objectProto = Object.prototype;\n\n  /** Used to check for own properties of an object. */\n  var hasOwnProperty = objectProto.hasOwnProperty;\n\n  /** Used to resolve the internal `[[Class]]` of values. */\n  var toString = objectProto.toString;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Capitalizes a string value.\n   *\n   * @private\n   * @param {string} string The string to capitalize.\n   * @returns {string} The capitalized string.\n   */\n  function capitalize(string) {\n    string = String(string);\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  /**\n   * A utility function to clean up the OS name.\n   *\n   * @private\n   * @param {string} os The OS name to clean up.\n   * @param {string} [pattern] A `RegExp` pattern matching the OS name.\n   * @param {string} [label] A label for the OS.\n   */\n  function cleanupOS(os, pattern, label) {\n    // Platform tokens are defined at:\n    // http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    // http://web.archive.org/web/20081122053950/http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    var data = {\n      '10.0': '10',\n      '6.4':  '10 Technical Preview',\n      '6.3':  '8.1',\n      '6.2':  '8',\n      '6.1':  'Server 2008 R2 / 7',\n      '6.0':  'Server 2008 / Vista',\n      '5.2':  'Server 2003 / XP 64-bit',\n      '5.1':  'XP',\n      '5.01': '2000 SP1',\n      '5.0':  '2000',\n      '4.0':  'NT',\n      '4.90': 'ME'\n    };\n    // Detect Windows version from platform tokens.\n    if (pattern && label && /^Win/i.test(os) && !/^Windows Phone /i.test(os) &&\n        (data = data[/[\\d.]+$/.exec(os)])) {\n      os = 'Windows ' + data;\n    }\n    // Correct character case and cleanup string.\n    os = String(os);\n\n    if (pattern && label) {\n      os = os.replace(RegExp(pattern, 'i'), label);\n    }\n\n    os = format(\n      os.replace(/ ce$/i, ' CE')\n        .replace(/\\bhpw/i, 'web')\n        .replace(/\\bMacintosh\\b/, 'Mac OS')\n        .replace(/_PowerPC\\b/i, ' OS')\n        .replace(/\\b(OS X) [^ \\d]+/i, '$1')\n        .replace(/\\bMac (OS X)\\b/, '$1')\n        .replace(/\\/(\\d)/, ' $1')\n        .replace(/_/g, '.')\n        .replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, '')\n        .replace(/\\bx86\\.64\\b/gi, 'x86_64')\n        .replace(/\\b(Windows Phone) OS\\b/, '$1')\n        .replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, '$1')\n        .split(' on ')[0]\n    );\n\n    return os;\n  }\n\n  /**\n   * An iteration utility for arrays and objects.\n   *\n   * @private\n   * @param {Array|Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   */\n  function each(object, callback) {\n    var index = -1,\n        length = object ? object.length : 0;\n\n    if (typeof length == 'number' && length > -1 && length <= maxSafeInteger) {\n      while (++index < length) {\n        callback(object[index], index, object);\n      }\n    } else {\n      forOwn(object, callback);\n    }\n  }\n\n  /**\n   * Trim and conditionally capitalize string values.\n   *\n   * @private\n   * @param {string} string The string to format.\n   * @returns {string} The formatted string.\n   */\n  function format(string) {\n    string = trim(string);\n    return /^(?:webOS|i(?:OS|P))/.test(string)\n      ? string\n      : capitalize(string);\n  }\n\n  /**\n   * Iterates over an object's own properties, executing the `callback` for each.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function executed per own property.\n   */\n  function forOwn(object, callback) {\n    for (var key in object) {\n      if (hasOwnProperty.call(object, key)) {\n        callback(object[key], key, object);\n      }\n    }\n  }\n\n  /**\n   * Gets the internal `[[Class]]` of a value.\n   *\n   * @private\n   * @param {*} value The value.\n   * @returns {string} The `[[Class]]`.\n   */\n  function getClassOf(value) {\n    return value == null\n      ? capitalize(value)\n      : toString.call(value).slice(8, -1);\n  }\n\n  /**\n   * Host objects can return type values that are different from their actual\n   * data type. The objects we are concerned with usually return non-primitive\n   * types of \"object\", \"function\", or \"unknown\".\n   *\n   * @private\n   * @param {*} object The owner of the property.\n   * @param {string} property The property to check.\n   * @returns {boolean} Returns `true` if the property value is a non-primitive, else `false`.\n   */\n  function isHostType(object, property) {\n    var type = object != null ? typeof object[property] : 'number';\n    return !/^(?:boolean|number|string|undefined)$/.test(type) &&\n      (type == 'object' ? !!object[property] : true);\n  }\n\n  /**\n   * Prepares a string for use in a `RegExp` by making hyphens and spaces optional.\n   *\n   * @private\n   * @param {string} string The string to qualify.\n   * @returns {string} The qualified string.\n   */\n  function qualify(string) {\n    return String(string).replace(/([ -])(?!$)/g, '$1?');\n  }\n\n  /**\n   * A bare-bones `Array#reduce` like utility function.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @returns {*} The accumulated result.\n   */\n  function reduce(array, callback) {\n    var accumulator = null;\n    each(array, function(value, index) {\n      accumulator = callback(accumulator, value, index, array);\n    });\n    return accumulator;\n  }\n\n  /**\n   * Removes leading and trailing whitespace from a string.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} The trimmed string.\n   */\n  function trim(string) {\n    return String(string).replace(/^ +| +$/g, '');\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a new platform object.\n   *\n   * @memberOf platform\n   * @param {Object|string} [ua=navigator.userAgent] The user agent string or\n   *  context object.\n   * @returns {Object} A platform object.\n   */\n  function parse(ua) {\n\n    /** The environment context object. */\n    var context = root;\n\n    /** Used to flag when a custom context is provided. */\n    var isCustomContext = ua && typeof ua == 'object' && getClassOf(ua) != 'String';\n\n    // Juggle arguments.\n    if (isCustomContext) {\n      context = ua;\n      ua = null;\n    }\n\n    /** Browser navigator object. */\n    var nav = context.navigator || {};\n\n    /** Browser user agent string. */\n    var userAgent = nav.userAgent || '';\n\n    ua || (ua = userAgent);\n\n    /** Used to flag when `thisBinding` is the [ModuleScope]. */\n    var isModuleScope = isCustomContext || thisBinding == oldRoot;\n\n    /** Used to detect if browser is like Chrome. */\n    var likeChrome = isCustomContext\n      ? !!nav.likeChrome\n      : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\n\n    /** Internal `[[Class]]` value shortcuts. */\n    var objectClass = 'Object',\n        airRuntimeClass = isCustomContext ? objectClass : 'ScriptBridgingProxyObject',\n        enviroClass = isCustomContext ? objectClass : 'Environment',\n        javaClass = (isCustomContext && context.java) ? 'JavaPackage' : getClassOf(context.java),\n        phantomClass = isCustomContext ? objectClass : 'RuntimeObject';\n\n    /** Detect Java environments. */\n    var java = /\\bJava/.test(javaClass) && context.java;\n\n    /** Detect Rhino. */\n    var rhino = java && getClassOf(context.environment) == enviroClass;\n\n    /** A character to represent alpha. */\n    var alpha = java ? 'a' : '\\u03b1';\n\n    /** A character to represent beta. */\n    var beta = java ? 'b' : '\\u03b2';\n\n    /** Browser document object. */\n    var doc = context.document || {};\n\n    /**\n     * Detect Opera browser (Presto-based).\n     * http://www.howtocreate.co.uk/operaStuff/operaObject.html\n     * http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#operamini\n     */\n    var opera = context.operamini || context.opera;\n\n    /** Opera `[[Class]]`. */\n    var operaClass = reOpera.test(operaClass = (isCustomContext && opera) ? opera['[[Class]]'] : getClassOf(opera))\n      ? operaClass\n      : (opera = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /** Temporary variable used over the script's lifetime. */\n    var data;\n\n    /** The CPU architecture. */\n    var arch = ua;\n\n    /** Platform description array. */\n    var description = [];\n\n    /** Platform alpha/beta indicator. */\n    var prerelease = null;\n\n    /** A flag to indicate that environment features should be used to resolve the platform. */\n    var useFeatures = ua == userAgent;\n\n    /** The browser/environment version. */\n    var version = useFeatures && opera && typeof opera.version == 'function' && opera.version();\n\n    /** A flag to indicate if the OS ends with \"/ Version\" */\n    var isSpecialCasedOS;\n\n    /* Detectable layout engines (order is important). */\n    var layout = getLayout([\n      { 'label': 'EdgeHTML', 'pattern': 'Edge' },\n      'Trident',\n      { 'label': 'WebKit', 'pattern': 'AppleWebKit' },\n      'iCab',\n      'Presto',\n      'NetFront',\n      'Tasman',\n      'KHTML',\n      'Gecko'\n    ]);\n\n    /* Detectable browser names (order is important). */\n    var name = getName([\n      'Adobe AIR',\n      'Arora',\n      'Avant Browser',\n      'Breach',\n      'Camino',\n      'Electron',\n      'Epiphany',\n      'Fennec',\n      'Flock',\n      'Galeon',\n      'GreenBrowser',\n      'iCab',\n      'Iceweasel',\n      'K-Meleon',\n      'Konqueror',\n      'Lunascape',\n      'Maxthon',\n      { 'label': 'Microsoft Edge', 'pattern': '(?:Edge|Edg|EdgA|EdgiOS)' },\n      'Midori',\n      'Nook Browser',\n      'PaleMoon',\n      'PhantomJS',\n      'Raven',\n      'Rekonq',\n      'RockMelt',\n      { 'label': 'Samsung Internet', 'pattern': 'SamsungBrowser' },\n      'SeaMonkey',\n      { 'label': 'Silk', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Sleipnir',\n      'SlimBrowser',\n      { 'label': 'SRWare Iron', 'pattern': 'Iron' },\n      'Sunrise',\n      'Swiftfox',\n      'Vivaldi',\n      'Waterfox',\n      'WebPositive',\n      { 'label': 'Yandex Browser', 'pattern': 'YaBrowser' },\n      { 'label': 'UC Browser', 'pattern': 'UCBrowser' },\n      'Opera Mini',\n      { 'label': 'Opera Mini', 'pattern': 'OPiOS' },\n      'Opera',\n      { 'label': 'Opera', 'pattern': 'OPR' },\n      'Chromium',\n      'Chrome',\n      { 'label': 'Chrome', 'pattern': '(?:HeadlessChrome)' },\n      { 'label': 'Chrome Mobile', 'pattern': '(?:CriOS|CrMo)' },\n      { 'label': 'Firefox', 'pattern': '(?:Firefox|Minefield)' },\n      { 'label': 'Firefox for iOS', 'pattern': 'FxiOS' },\n      { 'label': 'IE', 'pattern': 'IEMobile' },\n      { 'label': 'IE', 'pattern': 'MSIE' },\n      'Safari'\n    ]);\n\n    /* Detectable products (order is important). */\n    var product = getProduct([\n      { 'label': 'BlackBerry', 'pattern': 'BB10' },\n      'BlackBerry',\n      { 'label': 'Galaxy S', 'pattern': 'GT-I9000' },\n      { 'label': 'Galaxy S2', 'pattern': 'GT-I9100' },\n      { 'label': 'Galaxy S3', 'pattern': 'GT-I9300' },\n      { 'label': 'Galaxy S4', 'pattern': 'GT-I9500' },\n      { 'label': 'Galaxy S5', 'pattern': 'SM-G900' },\n      { 'label': 'Galaxy S6', 'pattern': 'SM-G920' },\n      { 'label': 'Galaxy S6 Edge', 'pattern': 'SM-G925' },\n      { 'label': 'Galaxy S7', 'pattern': 'SM-G930' },\n      { 'label': 'Galaxy S7 Edge', 'pattern': 'SM-G935' },\n      'Google TV',\n      'Lumia',\n      'iPad',\n      'iPod',\n      'iPhone',\n      'Kindle',\n      { 'label': 'Kindle Fire', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Nexus',\n      'Nook',\n      'PlayBook',\n      'PlayStation Vita',\n      'PlayStation',\n      'TouchPad',\n      'Transformer',\n      { 'label': 'Wii U', 'pattern': 'WiiU' },\n      'Wii',\n      'Xbox One',\n      { 'label': 'Xbox 360', 'pattern': 'Xbox' },\n      'Xoom'\n    ]);\n\n    /* Detectable manufacturers. */\n    var manufacturer = getManufacturer({\n      'Apple': { 'iPad': 1, 'iPhone': 1, 'iPod': 1 },\n      'Alcatel': {},\n      'Archos': {},\n      'Amazon': { 'Kindle': 1, 'Kindle Fire': 1 },\n      'Asus': { 'Transformer': 1 },\n      'Barnes & Noble': { 'Nook': 1 },\n      'BlackBerry': { 'PlayBook': 1 },\n      'Google': { 'Google TV': 1, 'Nexus': 1 },\n      'HP': { 'TouchPad': 1 },\n      'HTC': {},\n      'Huawei': {},\n      'Lenovo': {},\n      'LG': {},\n      'Microsoft': { 'Xbox': 1, 'Xbox One': 1 },\n      'Motorola': { 'Xoom': 1 },\n      'Nintendo': { 'Wii U': 1,  'Wii': 1 },\n      'Nokia': { 'Lumia': 1 },\n      'Oppo': {},\n      'Samsung': { 'Galaxy S': 1, 'Galaxy S2': 1, 'Galaxy S3': 1, 'Galaxy S4': 1 },\n      'Sony': { 'PlayStation': 1, 'PlayStation Vita': 1 },\n      'Xiaomi': { 'Mi': 1, 'Redmi': 1 }\n    });\n\n    /* Detectable operating systems (order is important). */\n    var os = getOS([\n      'Windows Phone',\n      'KaiOS',\n      'Android',\n      'CentOS',\n      { 'label': 'Chrome OS', 'pattern': 'CrOS' },\n      'Debian',\n      { 'label': 'DragonFly BSD', 'pattern': 'DragonFly' },\n      'Fedora',\n      'FreeBSD',\n      'Gentoo',\n      'Haiku',\n      'Kubuntu',\n      'Linux Mint',\n      'OpenBSD',\n      'Red Hat',\n      'SuSE',\n      'Ubuntu',\n      'Xubuntu',\n      'Cygwin',\n      'Symbian OS',\n      'hpwOS',\n      'webOS ',\n      'webOS',\n      'Tablet OS',\n      'Tizen',\n      'Linux',\n      'Mac OS X',\n      'Macintosh',\n      'Mac',\n      'Windows 98;',\n      'Windows '\n    ]);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Picks the layout engine from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected layout engine.\n     */\n    function getLayout(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the manufacturer from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An object of guesses.\n     * @returns {null|string} The detected manufacturer.\n     */\n    function getManufacturer(guesses) {\n      return reduce(guesses, function(result, value, key) {\n        // Lookup the manufacturer by product or scan the UA for the manufacturer.\n        return result || (\n          value[product] ||\n          value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] ||\n          RegExp('\\\\b' + qualify(key) + '(?:\\\\b|\\\\w*\\\\d)', 'i').exec(ua)\n        ) && key;\n      });\n    }\n\n    /**\n     * Picks the browser name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected browser name.\n     */\n    function getName(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the OS name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected OS name.\n     */\n    function getOS(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + '(?:/[\\\\d.]+|[ \\\\w.]*)', 'i').exec(ua)\n            )) {\n          result = cleanupOS(result, pattern, guess.label || guess);\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Picks the product name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected product name.\n     */\n    function getProduct(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + ' *\\\\d+[.\\\\w_]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + ' *\\\\w+-[\\\\w]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + '(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)', 'i').exec(ua)\n            )) {\n          // Split by forward slash and append product version if needed.\n          if ((result = String((guess.label && !RegExp(pattern, 'i').test(guess.label)) ? guess.label : result).split('/'))[1] && !/[\\d.]+/.test(result[0])) {\n            result[0] += ' ' + result[1];\n          }\n          // Correct character case and cleanup string.\n          guess = guess.label || guess;\n          result = format(result[0]\n            .replace(RegExp(pattern, 'i'), guess)\n            .replace(RegExp('; *(?:' + guess + '[_-])?', 'i'), ' ')\n            .replace(RegExp('(' + guess + ')[-_.]?(\\\\w)', 'i'), '$1 $2'));\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Resolves the version using an array of UA patterns.\n     *\n     * @private\n     * @param {Array} patterns An array of UA patterns.\n     * @returns {null|string} The detected version.\n     */\n    function getVersion(patterns) {\n      return reduce(patterns, function(result, pattern) {\n        return result || (RegExp(pattern +\n          '(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)', 'i').exec(ua) || 0)[1] || null;\n      });\n    }\n\n    /**\n     * Returns `platform.description` when the platform object is coerced to a string.\n     *\n     * @name toString\n     * @memberOf platform\n     * @returns {string} Returns `platform.description` if available, else an empty string.\n     */\n    function toStringPlatform() {\n      return this.description || '';\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Convert layout to an array so we can add extra details.\n    layout && (layout = [layout]);\n\n    // Detect Android products.\n    // Browsers on Android devices typically provide their product IDS after \"Android;\"\n    // up to \"Build\" or \") AppleWebKit\".\n    // Example:\n    // \"Mozilla/5.0 (Linux; Android 8.1.0; Moto G (5) Plus) AppleWebKit/537.36\n    // (KHTML, like Gecko) Chrome/70.0.3538.80 Mobile Safari/537.36\"\n    if (/\\bAndroid\\b/.test(os) && !product &&\n        (data = /\\bAndroid[^;]*;(.*?)(?:Build|\\) AppleWebKit)\\b/i.exec(ua))) {\n      product = trim(data[1])\n        // Replace any language codes (eg. \"en-US\").\n        .replace(/^[a-z]{2}-[a-z]{2};\\s*/i, '')\n        || null;\n    }\n    // Detect product names that contain their manufacturer's name.\n    if (manufacturer && !product) {\n      product = getProduct([manufacturer]);\n    } else if (manufacturer && product) {\n      product = product\n        .replace(RegExp('^(' + qualify(manufacturer) + ')[-_.\\\\s]', 'i'), manufacturer + ' ')\n        .replace(RegExp('^(' + qualify(manufacturer) + ')[-_.]?(\\\\w)', 'i'), manufacturer + ' $2');\n    }\n    // Clean up Google TV.\n    if ((data = /\\bGoogle TV\\b/.exec(product))) {\n      product = data[0];\n    }\n    // Detect simulators.\n    if (/\\bSimulator\\b/i.test(ua)) {\n      product = (product ? product + ' ' : '') + 'Simulator';\n    }\n    // Detect Opera Mini 8+ running in Turbo/Uncompressed mode on iOS.\n    if (name == 'Opera Mini' && /\\bOPiOS\\b/.test(ua)) {\n      description.push('running in Turbo/Uncompressed mode');\n    }\n    // Detect IE Mobile 11.\n    if (name == 'IE' && /\\blike iPhone OS\\b/.test(ua)) {\n      data = parse(ua.replace(/like iPhone OS/, ''));\n      manufacturer = data.manufacturer;\n      product = data.product;\n    }\n    // Detect iOS.\n    else if (/^iP/.test(product)) {\n      name || (name = 'Safari');\n      os = 'iOS' + ((data = / OS ([\\d_]+)/i.exec(ua))\n        ? ' ' + data[1].replace(/_/g, '.')\n        : '');\n    }\n    // Detect Kubuntu.\n    else if (name == 'Konqueror' && /^Linux\\b/i.test(os)) {\n      os = 'Kubuntu';\n    }\n    // Detect Android browsers.\n    else if ((manufacturer && manufacturer != 'Google' &&\n        ((/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua)) || /\\bVita\\b/.test(product))) ||\n        (/\\bAndroid\\b/.test(os) && /^Chrome/.test(name) && /\\bVersion\\//i.test(ua))) {\n      name = 'Android Browser';\n      os = /\\bAndroid\\b/.test(os) ? os : 'Android';\n    }\n    // Detect Silk desktop/accelerated modes.\n    else if (name == 'Silk') {\n      if (!/\\bMobi/i.test(ua)) {\n        os = 'Android';\n        description.unshift('desktop mode');\n      }\n      if (/Accelerated *= *true/i.test(ua)) {\n        description.unshift('accelerated');\n      }\n    }\n    // Detect UC Browser speed mode.\n    else if (name == 'UC Browser' && /\\bUCWEB\\b/.test(ua)) {\n      description.push('speed mode');\n    }\n    // Detect PaleMoon identifying as Firefox.\n    else if (name == 'PaleMoon' && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\n      description.push('identifying as Firefox ' + data[1]);\n    }\n    // Detect Firefox OS and products running Firefox.\n    else if (name == 'Firefox' && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\n      os || (os = 'Firefox OS');\n      product || (product = data[1]);\n    }\n    // Detect false positives for Firefox/Safari.\n    else if (!name || (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))) {\n      // Escape the `/` for Firefox 1.\n      if (name && !product && /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(data + '/') + 8))) {\n        // Clear name of false positives.\n        name = null;\n      }\n      // Reassign a generic name.\n      if ((data = product || manufacturer || os) &&\n          (product || manufacturer || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))) {\n        name = /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data) + ' Browser';\n      }\n    }\n    // Add Chrome version to description for Electron.\n    else if (name == 'Electron' && (data = (/\\bChrome\\/([\\d.]+)\\b/.exec(ua) || 0)[1])) {\n      description.push('Chromium ' + data);\n    }\n    // Detect non-Opera (Presto-based) versions (order is important).\n    if (!version) {\n      version = getVersion([\n        '(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$)|UCBrowser|YaBrowser)',\n        'Version',\n        qualify(name),\n        '(?:Firefox|Minefield|NetFront)'\n      ]);\n    }\n    // Detect stubborn layout engines.\n    if ((data =\n          layout == 'iCab' && parseFloat(version) > 3 && 'WebKit' ||\n          /\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? 'Blink' : 'Presto') ||\n          /\\b(?:Midori|Nook|Safari)\\b/i.test(ua) && !/^(?:Trident|EdgeHTML)$/.test(layout) && 'WebKit' ||\n          !layout && /\\bMSIE\\b/i.test(ua) && (os == 'Mac OS' ? 'Tasman' : 'Trident') ||\n          layout == 'WebKit' && /\\bPlayStation\\b(?! Vita\\b)/i.test(name) && 'NetFront'\n        )) {\n      layout = [data];\n    }\n    // Detect Windows Phone 7 desktop mode.\n    if (name == 'IE' && (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])) {\n      name += ' Mobile';\n      os = 'Windows Phone ' + (/\\+$/.test(data) ? data : data + '.x');\n      description.unshift('desktop mode');\n    }\n    // Detect Windows Phone 8.x desktop mode.\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\n      name = 'IE Mobile';\n      os = 'Windows Phone 8.x';\n      description.unshift('desktop mode');\n      version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\n    }\n    // Detect IE 11 identifying as other browsers.\n    else if (name != 'IE' && layout == 'Trident' && (data = /\\brv:([\\d.]+)/.exec(ua))) {\n      if (name) {\n        description.push('identifying as ' + name + (version ? ' ' + version : ''));\n      }\n      name = 'IE';\n      version = data[1];\n    }\n    // Leverage environment features.\n    if (useFeatures) {\n      // Detect server-side environments.\n      // Rhino has a global function while others have a global object.\n      if (isHostType(context, 'global')) {\n        if (java) {\n          data = java.lang.System;\n          arch = data.getProperty('os.arch');\n          os = os || data.getProperty('os.name') + ' ' + data.getProperty('os.version');\n        }\n        if (rhino) {\n          try {\n            version = context.require('ringo/engine').version.join('.');\n            name = 'RingoJS';\n          } catch(e) {\n            if ((data = context.system) && data.global.system == context.system) {\n              name = 'Narwhal';\n              os || (os = data[0].os || null);\n            }\n          }\n          if (!name) {\n            name = 'Rhino';\n          }\n        }\n        else if (\n          typeof context.process == 'object' && !context.process.browser &&\n          (data = context.process)\n        ) {\n          if (typeof data.versions == 'object') {\n            if (typeof data.versions.electron == 'string') {\n              description.push('Node ' + data.versions.node);\n              name = 'Electron';\n              version = data.versions.electron;\n            } else if (typeof data.versions.nw == 'string') {\n              description.push('Chromium ' + version, 'Node ' + data.versions.node);\n              name = 'NW.js';\n              version = data.versions.nw;\n            }\n          }\n          if (!name) {\n            name = 'Node.js';\n            arch = data.arch;\n            os = data.platform;\n            version = /[\\d.]+/.exec(data.version);\n            version = version ? version[0] : null;\n          }\n        }\n      }\n      // Detect Adobe AIR.\n      else if (getClassOf((data = context.runtime)) == airRuntimeClass) {\n        name = 'Adobe AIR';\n        os = data.flash.system.Capabilities.os;\n      }\n      // Detect PhantomJS.\n      else if (getClassOf((data = context.phantom)) == phantomClass) {\n        name = 'PhantomJS';\n        version = (data = data.version || null) && (data.major + '.' + data.minor + '.' + data.patch);\n      }\n      // Detect IE compatibility modes.\n      else if (typeof doc.documentMode == 'number' && (data = /\\bTrident\\/(\\d+)/i.exec(ua))) {\n        // We're in compatibility mode when the Trident version + 4 doesn't\n        // equal the document mode.\n        version = [version, doc.documentMode];\n        if ((data = +data[1] + 4) != version[1]) {\n          description.push('IE ' + version[1] + ' mode');\n          layout && (layout[1] = '');\n          version[1] = data;\n        }\n        version = name == 'IE' ? String(version[1].toFixed(1)) : version[0];\n      }\n      // Detect IE 11 masking as other browsers.\n      else if (typeof doc.documentMode == 'number' && /^(?:Chrome|Firefox)\\b/.test(name)) {\n        description.push('masking as ' + name + ' ' + version);\n        name = 'IE';\n        version = '11.0';\n        layout = ['Trident'];\n        os = 'Windows';\n      }\n      os = os && format(os);\n    }\n    // Detect prerelease phases.\n    if (version && (data =\n          /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) ||\n          /(?:alpha|beta)(?: ?\\d)?/i.exec(ua + ';' + (useFeatures && nav.appMinorVersion)) ||\n          /\\bMinefield\\b/i.test(ua) && 'a'\n        )) {\n      prerelease = /b/i.test(data) ? 'beta' : 'alpha';\n      version = version.replace(RegExp(data + '\\\\+?$'), '') +\n        (prerelease == 'beta' ? beta : alpha) + (/\\d+\\+?/.exec(data) || '');\n    }\n    // Detect Firefox Mobile.\n    if (name == 'Fennec' || name == 'Firefox' && /\\b(?:Android|Firefox OS|KaiOS)\\b/.test(os)) {\n      name = 'Firefox Mobile';\n    }\n    // Obscure Maxthon's unreliable version.\n    else if (name == 'Maxthon' && version) {\n      version = version.replace(/\\.[\\d.]+/, '.x');\n    }\n    // Detect Xbox 360 and Xbox One.\n    else if (/\\bXbox\\b/i.test(product)) {\n      if (product == 'Xbox 360') {\n        os = null;\n      }\n      if (product == 'Xbox 360' && /\\bIEMobile\\b/.test(ua)) {\n        description.unshift('mobile mode');\n      }\n    }\n    // Add mobile postfix.\n    else if ((/^(?:Chrome|IE|Opera)$/.test(name) || name && !product && !/Browser|Mobi/.test(name)) &&\n        (os == 'Windows CE' || /Mobi/i.test(ua))) {\n      name += ' Mobile';\n    }\n    // Detect IE platform preview.\n    else if (name == 'IE' && useFeatures) {\n      try {\n        if (context.external === null) {\n          description.unshift('platform preview');\n        }\n      } catch(e) {\n        description.unshift('embedded');\n      }\n    }\n    // Detect BlackBerry OS version.\n    // http://docs.blackberry.com/en/developers/deliverables/18169/HTTP_headers_sent_by_BB_Browser_1234911_11.jsp\n    else if ((/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) && (data =\n          (RegExp(product.replace(/ +/g, ' *') + '/([.\\\\d]+)', 'i').exec(ua) || 0)[1] ||\n          version\n        )) {\n      data = [data, /BB10/.test(ua)];\n      os = (data[1] ? (product = null, manufacturer = 'BlackBerry') : 'Device Software') + ' ' + data[0];\n      version = null;\n    }\n    // Detect Opera identifying/masking itself as another browser.\n    // http://www.opera.com/support/kb/view/843/\n    else if (this != forOwn && product != 'Wii' && (\n          (useFeatures && opera) ||\n          (/Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua)) ||\n          (name == 'Firefox' && /\\bOS X (?:\\d+\\.){2,}/.test(os)) ||\n          (name == 'IE' && (\n            (os && !/^Win/.test(os) && version > 5.5) ||\n            /\\bWindows XP\\b/.test(os) && version > 8 ||\n            version == 8 && !/\\bTrident\\b/.test(ua)\n          ))\n        ) && !reOpera.test((data = parse.call(forOwn, ua.replace(reOpera, '') + ';'))) && data.name) {\n      // When \"identifying\", the UA contains both Opera and the other browser's name.\n      data = 'ing as ' + data.name + ((data = data.version) ? ' ' + data : '');\n      if (reOpera.test(name)) {\n        if (/\\bIE\\b/.test(data) && os == 'Mac OS') {\n          os = null;\n        }\n        data = 'identify' + data;\n      }\n      // When \"masking\", the UA contains only the other browser's name.\n      else {\n        data = 'mask' + data;\n        if (operaClass) {\n          name = format(operaClass.replace(/([a-z])([A-Z])/g, '$1 $2'));\n        } else {\n          name = 'Opera';\n        }\n        if (/\\bIE\\b/.test(data)) {\n          os = null;\n        }\n        if (!useFeatures) {\n          version = null;\n        }\n      }\n      layout = ['Presto'];\n      description.push(data);\n    }\n    // Detect WebKit Nightly and approximate Chrome/Safari versions.\n    if ((data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n      // Correct build number for numeric comparison.\n      // (e.g. \"532.5\" becomes \"532.05\")\n      data = [parseFloat(data.replace(/\\.(\\d)$/, '.0$1')), data];\n      // Nightly builds are postfixed with a \"+\".\n      if (name == 'Safari' && data[1].slice(-1) == '+') {\n        name = 'WebKit Nightly';\n        prerelease = 'alpha';\n        version = data[1].slice(0, -1);\n      }\n      // Clear incorrect browser versions.\n      else if (version == data[1] ||\n          version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n        version = null;\n      }\n      // Use the full Chrome version when available.\n      data[1] = (/\\b(?:Headless)?Chrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\n      // Detect Blink layout engine.\n      if (data[0] == 537.36 && data[2] == 537.36 && parseFloat(data[1]) >= 28 && layout == 'WebKit') {\n        layout = ['Blink'];\n      }\n      // Detect JavaScriptCore.\n      // http://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-androi\n      if (!useFeatures || (!likeChrome && !data[1])) {\n        layout && (layout[1] = 'like Safari');\n        data = (data = data[0], data < 400 ? 1 : data < 500 ? 2 : data < 526 ? 3 : data < 533 ? 4 : data < 534 ? '4+' : data < 535 ? 5 : data < 537 ? 6 : data < 538 ? 7 : data < 601 ? 8 : data < 602 ? 9 : data < 604 ? 10 : data < 606 ? 11 : data < 608 ? 12 : '12');\n      } else {\n        layout && (layout[1] = 'like Chrome');\n        data = data[1] || (data = data[0], data < 530 ? 1 : data < 532 ? 2 : data < 532.05 ? 3 : data < 533 ? 4 : data < 534.03 ? 5 : data < 534.07 ? 6 : data < 534.10 ? 7 : data < 534.13 ? 8 : data < 534.16 ? 9 : data < 534.24 ? 10 : data < 534.30 ? 11 : data < 535.01 ? 12 : data < 535.02 ? '13+' : data < 535.07 ? 15 : data < 535.11 ? 16 : data < 535.19 ? 17 : data < 536.05 ? 18 : data < 536.10 ? 19 : data < 537.01 ? 20 : data < 537.11 ? '21+' : data < 537.13 ? 23 : data < 537.18 ? 24 : data < 537.24 ? 25 : data < 537.36 ? 26 : layout != 'Blink' ? '27' : '28');\n      }\n      // Add the postfix of \".x\" or \"+\" for approximate versions.\n      layout && (layout[1] += ' ' + (data += typeof data == 'number' ? '.x' : /[.+]/.test(data) ? '' : '+'));\n      // Obscure version for some Safari 1-2 releases.\n      if (name == 'Safari' && (!version || parseInt(version) > 45)) {\n        version = data;\n      } else if (name == 'Chrome' && /\\bHeadlessChrome/i.test(ua)) {\n        description.unshift('headless');\n      }\n    }\n    // Detect Opera desktop modes.\n    if (name == 'Opera' &&  (data = /\\bzbov|zvav$/.exec(os))) {\n      name += ' ';\n      description.unshift('desktop mode');\n      if (data == 'zvav') {\n        name += 'Mini';\n        version = null;\n      } else {\n        name += 'Mobile';\n      }\n      os = os.replace(RegExp(' *' + data + '$'), '');\n    }\n    // Detect Chrome desktop mode.\n    else if (name == 'Safari' && /\\bChrome\\b/.exec(layout && layout[1])) {\n      description.unshift('desktop mode');\n      name = 'Chrome Mobile';\n      version = null;\n\n      if (/\\bOS X\\b/.test(os)) {\n        manufacturer = 'Apple';\n        os = 'iOS 4.3+';\n      } else {\n        os = null;\n      }\n    }\n    // Newer versions of SRWare Iron uses the Chrome tag to indicate its version number.\n    else if (/\\bSRWare Iron\\b/.test(name) && !version) {\n      version = getVersion('Chrome');\n    }\n    // Strip incorrect OS versions.\n    if (version && version.indexOf((data = /[\\d.]+$/.exec(os))) == 0 &&\n        ua.indexOf('/' + data + '-') > -1) {\n      os = trim(os.replace(data, ''));\n    }\n    // Ensure OS does not include the browser name.\n    if (os && os.indexOf(name) != -1 && !RegExp(name + ' OS').test(os)) {\n      os = os.replace(RegExp(' *' + qualify(name) + ' *'), '');\n    }\n    // Add layout engine.\n    if (layout && !/\\b(?:Avant|Nook)\\b/.test(name) && (\n        /Browser|Lunascape|Maxthon/.test(name) ||\n        name != 'Safari' && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1]) ||\n        /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(name) && layout[1])) {\n      // Don't add layout details to description if they are falsey.\n      (data = layout[layout.length - 1]) && description.push(data);\n    }\n    // Combine contextual information.\n    if (description.length) {\n      description = ['(' + description.join('; ') + ')'];\n    }\n    // Append manufacturer to description.\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\n      description.push('on ' + manufacturer);\n    }\n    // Append product to description.\n    if (product) {\n      description.push((/^on /.test(description[description.length - 1]) ? '' : 'on ') + product);\n    }\n    // Parse the OS into an object.\n    if (os) {\n      data = / ([\\d.+]+)$/.exec(os);\n      isSpecialCasedOS = data && os.charAt(os.length - data[0].length - 1) == '/';\n      os = {\n        'architecture': 32,\n        'family': (data && !isSpecialCasedOS) ? os.replace(data[0], '') : os,\n        'version': data ? data[1] : null,\n        'toString': function() {\n          var version = this.version;\n          return this.family + ((version && !isSpecialCasedOS) ? ' ' + version : '') + (this.architecture == 64 ? ' 64-bit' : '');\n        }\n      };\n    }\n    // Add browser/OS architecture.\n    if ((data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) && !/\\bi686\\b/i.test(arch)) {\n      if (os) {\n        os.architecture = 64;\n        os.family = os.family.replace(RegExp(' *' + data), '');\n      }\n      if (\n          name && (/\\bWOW64\\b/i.test(ua) ||\n          (useFeatures && /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) && !/\\bWin64; x64\\b/i.test(ua)))\n      ) {\n        description.unshift('32-bit');\n      }\n    }\n    // Chrome 39 and above on OS X is always 64-bit.\n    else if (\n        os && /^OS X/.test(os.family) &&\n        name == 'Chrome' && parseFloat(version) >= 39\n    ) {\n      os.architecture = 64;\n    }\n\n    ua || (ua = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The platform object.\n     *\n     * @name platform\n     * @type Object\n     */\n    var platform = {};\n\n    /**\n     * The platform description.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.description = ua;\n\n    /**\n     * The name of the browser's layout engine.\n     *\n     * The list of common layout engines include:\n     * \"Blink\", \"EdgeHTML\", \"Gecko\", \"Trident\" and \"WebKit\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.layout = layout && layout[0];\n\n    /**\n     * The name of the product's manufacturer.\n     *\n     * The list of manufacturers include:\n     * \"Apple\", \"Archos\", \"Amazon\", \"Asus\", \"Barnes & Noble\", \"BlackBerry\",\n     * \"Google\", \"HP\", \"HTC\", \"LG\", \"Microsoft\", \"Motorola\", \"Nintendo\",\n     * \"Nokia\", \"Samsung\" and \"Sony\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.manufacturer = manufacturer;\n\n    /**\n     * The name of the browser/environment.\n     *\n     * The list of common browser names include:\n     * \"Chrome\", \"Electron\", \"Firefox\", \"Firefox for iOS\", \"IE\",\n     * \"Microsoft Edge\", \"PhantomJS\", \"Safari\", \"SeaMonkey\", \"Silk\",\n     * \"Opera Mini\" and \"Opera\"\n     *\n     * Mobile versions of some browsers have \"Mobile\" appended to their name:\n     * eg. \"Chrome Mobile\", \"Firefox Mobile\", \"IE Mobile\" and \"Opera Mobile\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.name = name;\n\n    /**\n     * The alpha/beta release indicator.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.prerelease = prerelease;\n\n    /**\n     * The name of the product hosting the browser.\n     *\n     * The list of common products include:\n     *\n     * \"BlackBerry\", \"Galaxy S4\", \"Lumia\", \"iPad\", \"iPod\", \"iPhone\", \"Kindle\",\n     * \"Kindle Fire\", \"Nexus\", \"Nook\", \"PlayBook\", \"TouchPad\" and \"Transformer\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.product = product;\n\n    /**\n     * The browser's user agent string.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.ua = ua;\n\n    /**\n     * The browser/environment version.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.version = name && version;\n\n    /**\n     * The name of the operating system.\n     *\n     * @memberOf platform\n     * @type Object\n     */\n    platform.os = os || {\n\n      /**\n       * The CPU architecture the OS is built for.\n       *\n       * @memberOf platform.os\n       * @type number|null\n       */\n      'architecture': null,\n\n      /**\n       * The family of the OS.\n       *\n       * Common values include:\n       * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n       * \"Windows XP\", \"OS X\", \"Linux\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\",\n       * \"SuSE\", \"Android\", \"iOS\" and \"Windows Phone\"\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'family': null,\n\n      /**\n       * The version of the OS.\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'version': null,\n\n      /**\n       * Returns the OS string.\n       *\n       * @memberOf platform.os\n       * @returns {string} The OS string.\n       */\n      'toString': function() { return 'null'; }\n    };\n\n    platform.parse = parse;\n    platform.toString = toStringPlatform;\n\n    if (platform.version) {\n      description.unshift(version);\n    }\n    if (platform.name) {\n      description.unshift(name);\n    }\n    if (os && name && !(os == String(os).split(' ')[0] && (os == name.split(' ')[0] || product))) {\n      description.push(product ? '(' + os + ')' : 'on ' + os);\n    }\n    if (description.length) {\n      platform.description = description.join(' ');\n    }\n    return platform;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export platform.\n  var platform = parse();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose platform on the global object to prevent errors when platform is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    root.platform = platform;\n\n    // Define as an anonymous module so platform can be aliased through path mapping.\n    define(function() {\n      return platform;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n    // Export for CommonJS support.\n    forOwn(platform, function(value, key) {\n      freeExports[key] = value;\n    });\n  }\n  else {\n    // Export to the global object.\n    root.platform = platform;\n  }\n}.call(this));\n", "/*!\n * normalize-path <https://github.com/jonschlinkert/normalize-path>\n *\n * Copyright (c) 2014-2018, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nmodule.exports = function(path, stripTrailing) {\n  if (typeof path !== 'string') {\n    throw new TypeError('expected path to be a string');\n  }\n\n  if (path === '\\\\' || path === '/') return '/';\n\n  var len = path.length;\n  if (len <= 1) return path;\n\n  // ensure that win32 namespaces has two leading slashes, so that the path is\n  // handled properly by the win32 version of path.parse() after being normalized\n  // https://msdn.microsoft.com/library/windows/desktop/aa365247(v=vs.85).aspx#namespaces\n  var prefix = '';\n  if (len > 4 && path[3] === '\\\\') {\n    var ch = path[2];\n    if ((ch === '?' || ch === '.') && path.slice(0, 2) === '\\\\\\\\') {\n      path = path.slice(2);\n      prefix = '//';\n    }\n  }\n\n  var segs = path.split(/[/\\\\]+/);\n  if (stripTrailing !== false && segs[segs.length - 1] === '') {\n    segs.pop();\n  }\n  return prefix + segs.join('/');\n};\n", "'use strict';\n\nconst BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nconst hasBlob = typeof Blob !== 'undefined';\n\nif (hasBlob) BINARY_TYPES.push('blob');\n\nmodule.exports = {\n  BINARY_TYPES,\n  CLOSE_TIMEOUT: 30000,\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  hasBlob,\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n", "'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n", "'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n", "'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n\n  //\n  // The choice to employ `zlib.reset()` over `zlib.close()` is dictated by the\n  // fact that in Node.js versions prior to 13.10.0, the callback for\n  // `zlib.flush()` is not called if `zlib.close()` is used. Utilizing\n  // `zlib.reset()` ensures that either the callback is invoked or an error is\n  // emitted.\n  //\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n\n  if (this[kError]) {\n    this[kCallback](this[kError]);\n    return;\n  }\n\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n", "'use strict';\n\nconst { isUtf8 } = require('buffer');\n\nconst { hasBlob } = require('./constants');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Determines whether a value is a `Blob`.\n *\n * @param {*} value The value to be tested\n * @return {Boolean} `true` if `value` is a `Blob`, else `false`\n * @private\n */\nfunction isBlob(value) {\n  return (\n    hasBlob &&\n    typeof value === 'object' &&\n    typeof value.arrayBuffer === 'function' &&\n    typeof value.type === 'string' &&\n    typeof value.stream === 'function' &&\n    (value[Symbol.toStringTag] === 'Blob' ||\n      value[Symbol.toStringTag] === 'File')\n  );\n}\n\nmodule.exports = {\n  isBlob,\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n", "'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\nconst DEFER_EVENT = 6;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._allowSynchronousEvents =\n      options.allowSynchronousEvents !== undefined\n        ? options.allowSynchronousEvents\n        : true;\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._errored = false;\n    this._loop = false;\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64(cb);\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData(cb);\n          break;\n        case INFLATING:\n        case DEFER_EVENT:\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    if (!this._errored) cb();\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getInfo(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      const error = this.createError(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n\n      cb(error);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      const error = this.createError(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (!this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        const error = this.createError(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        const error = this.createError(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    } else {\n      const error = this.createError(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        const error = this.createError(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n\n        cb(error);\n        return;\n      }\n    } else if (this._masked) {\n      const error = this.createError(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength16(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength64(cb) {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      const error = this.createError(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  haveLength(cb) {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        const error = this.createError(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data, cb);\n      return;\n    }\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    this.dataMessage(cb);\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          const error = this.createError(\n            RangeError,\n            'Max payload size exceeded',\n            false,\n            1009,\n            'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._fragments.push(buf);\n      }\n\n      this.dataMessage(cb);\n      if (this._state === GET_INFO) this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  dataMessage(cb) {\n    if (!this._fin) {\n      this._state = GET_INFO;\n      return;\n    }\n\n    const messageLength = this._messageLength;\n    const fragments = this._fragments;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragmented = 0;\n    this._fragments = [];\n\n    if (this._opcode === 2) {\n      let data;\n\n      if (this._binaryType === 'nodebuffer') {\n        data = concat(fragments, messageLength);\n      } else if (this._binaryType === 'arraybuffer') {\n        data = toArrayBuffer(concat(fragments, messageLength));\n      } else if (this._binaryType === 'blob') {\n        data = new Blob(fragments);\n      } else {\n        data = fragments;\n      }\n\n      if (this._allowSynchronousEvents) {\n        this.emit('message', data, true);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', data, true);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    } else {\n      const buf = concat(fragments, messageLength);\n\n      if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n        const error = this.createError(\n          Error,\n          'invalid UTF-8 sequence',\n          true,\n          1007,\n          'WS_ERR_INVALID_UTF8'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (this._state === INFLATING || this._allowSynchronousEvents) {\n        this.emit('message', buf, false);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', buf, false);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data, cb) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this._loop = false;\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          const error = this.createError(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n\n          cb(error);\n          return;\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          const error = this.createError(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._loop = false;\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n\n      this._state = GET_INFO;\n      return;\n    }\n\n    if (this._allowSynchronousEvents) {\n      this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n      this._state = GET_INFO;\n    } else {\n      this._state = DEFER_EVENT;\n      setImmediate(() => {\n        this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n        this._state = GET_INFO;\n        this.startLoop(cb);\n      });\n    }\n  }\n\n  /**\n   * Builds an error object.\n   *\n   * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n   * @param {String} message The error message\n   * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n   *     `message`\n   * @param {Number} statusCode The status code\n   * @param {String} errorCode The exposed error code\n   * @return {(Error|RangeError)} The error\n   * @private\n   */\n  createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n    this._loop = false;\n    this._errored = true;\n\n    const err = new ErrorCtor(\n      prefix ? `Invalid WebSocket frame: ${message}` : message\n    );\n\n    Error.captureStackTrace(err, this.createError);\n    err.code = errorCode;\n    err[kStatusCode] = statusCode;\n    return err;\n  }\n}\n\nmodule.exports = Receiver;\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex\" }] */\n\n'use strict';\n\nconst { Duplex } = require('stream');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER, kWebSocket, NOOP } = require('./constants');\nconst { isBlob, isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\nconst RANDOM_POOL_SIZE = 8 * 1024;\nlet randomPool;\nlet randomPoolPointer = RANDOM_POOL_SIZE;\n\nconst DEFAULT = 0;\nconst DEFLATING = 1;\nconst GET_BLOB_DATA = 2;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {Duplex} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._queue = [];\n    this._state = DEFAULT;\n    this.onerror = NOOP;\n    this[kWebSocket] = undefined;\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n          /* istanbul ignore else  */\n          if (randomPool === undefined) {\n            //\n            // This is lazily initialized because server-sent frames must not\n            // be masked so it may never be used.\n            //\n            randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n          }\n\n          randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n          randomPoolPointer = 0;\n        }\n\n        mask[0] = randomPool[randomPoolPointer++];\n        mask[1] = randomPool[randomPoolPointer++];\n        mask[2] = randomPool[randomPoolPointer++];\n        mask[3] = randomPool[randomPoolPointer++];\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    const opts = {\n      [kByteLength]: byteLength,\n      fin: options.fin,\n      generateMask: this._generateMask,\n      mask: options.mask,\n      maskBuffer: this._maskBuffer,\n      opcode,\n      readOnly,\n      rsv1\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, this._compress, opts, cb]);\n      } else {\n        this.getBlobData(data, this._compress, opts, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n    } else {\n      this.dispatch(data, this._compress, opts, cb);\n    }\n  }\n\n  /**\n   * Gets the contents of a blob as binary data.\n   *\n   * @param {Blob} blob The blob\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     the data\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  getBlobData(blob, compress, options, cb) {\n    this._bufferedBytes += options[kByteLength];\n    this._state = GET_BLOB_DATA;\n\n    blob\n      .arrayBuffer()\n      .then((arrayBuffer) => {\n        if (this._socket.destroyed) {\n          const err = new Error(\n            'The socket was closed while the blob was being read'\n          );\n\n          //\n          // `callCallbacks` is called in the next tick to ensure that errors\n          // that might be thrown in the callbacks behave like errors thrown\n          // outside the promise chain.\n          //\n          process.nextTick(callCallbacks, this, err, cb);\n          return;\n        }\n\n        this._bufferedBytes -= options[kByteLength];\n        const data = toBuffer(arrayBuffer);\n\n        if (!compress) {\n          this._state = DEFAULT;\n          this.sendFrame(Sender.frame(data, options), cb);\n          this.dequeue();\n        } else {\n          this.dispatch(data, compress, options, cb);\n        }\n      })\n      .catch((err) => {\n        //\n        // `onError` is called in the next tick for the same reason that\n        // `callCallbacks` above is.\n        //\n        process.nextTick(onError, this, err, cb);\n      });\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._state = DEFLATING;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        callCallbacks(this, err, cb);\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._state = DEFAULT;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (this._state === DEFAULT && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {(Buffer | String)[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Calls queued callbacks with an error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error to call the callbacks with\n * @param {Function} [cb] The first callback\n * @private\n */\nfunction callCallbacks(sender, err, cb) {\n  if (typeof cb === 'function') cb(err);\n\n  for (let i = 0; i < sender._queue.length; i++) {\n    const params = sender._queue[i];\n    const callback = params[params.length - 1];\n\n    if (typeof callback === 'function') callback(err);\n  }\n}\n\n/**\n * Handles a `Sender` error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error\n * @param {Function} [cb] The first pending callback\n * @private\n */\nfunction onError(sender, err, cb) {\n  callCallbacks(sender, err, cb);\n  sender.onerror(err);\n}\n", "'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n", "'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex|Readable$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Duplex, Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst { isBlob } = require('./validation');\n\nconst {\n  BINARY_TYPES,\n  CLOSE_TIMEOUT,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._errorEmitted = false;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._autoPong = options.autoPong;\n      this._closeTimeout = options.closeTimeout;\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * For historical reasons, the custom \"nodebuffer\" type is used by the default\n   * instead of \"blob\".\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      allowSynchronousEvents: options.allowSynchronousEvents,\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    const sender = new Sender(socket, this._extensions, options.generateMask);\n\n    this._receiver = receiver;\n    this._sender = sender;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    sender[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    sender.onerror = senderOnError;\n\n    //\n    // These methods may not be available if `socket` is just a `Duplex`.\n    //\n    if (socket.setTimeout) socket.setTimeout(0);\n    if (socket.setNoDelay) socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    setCloseTimer(this);\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether any\n *     of the `'message'`, `'ping'`, and `'pong'` events can be emitted multiple\n *     times in the same tick\n * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n *     automatically send a pong in response to a ping\n * @param {Number} [options.closeTimeout=30000] Duration in milliseconds to wait\n *     for the closing handshake to finish after `websocket.close()` is called\n * @param {Function} [options.finishRequest] A function which can be used to\n *     customize the headers of each http request before it is sent\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    allowSynchronousEvents: true,\n    autoPong: true,\n    closeTimeout: CLOSE_TIMEOUT,\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  websocket._autoPong = opts.autoPong;\n  websocket._closeTimeout = opts.closeTimeout;\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n  }\n\n  if (parsedUrl.protocol === 'http:') {\n    parsedUrl.protocol = 'ws:';\n  } else if (parsedUrl.protocol === 'https:') {\n    parsedUrl.protocol = 'wss:';\n  }\n\n  websocket._url = parsedUrl.href;\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", ' +\n      '\"http:\", \"https:\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection =\n    opts.createConnection || (isSecure ? tlsConnect : netConnect);\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n          ? false\n          : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      allowSynchronousEvents: opts.allowSynchronousEvents,\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  if (opts.finishRequest) {\n    opts.finishRequest(req, websocket);\n  } else {\n    req.end();\n  }\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  //\n  // The following assignment is practically useless and is done only for\n  // consistency.\n  //\n  websocket._errorEmitted = true;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = isBlob(data) ? data.size : toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The `Sender` error event handler.\n *\n * @param {Error} The error\n * @private\n */\nfunction senderOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket.readyState === WebSocket.CLOSED) return;\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket._readyState = WebSocket.CLOSING;\n    setCloseTimer(websocket);\n  }\n\n  //\n  // `socket.end()` is used instead of `socket.destroy()` to allow the other\n  // peer to finish sending queued data. There is no need to set a timer here\n  // because `CLOSING` means that it is already set or not needed.\n  //\n  this._socket.end();\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * Set a timer to destroy the underlying raw socket of a WebSocket.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @private\n */\nfunction setCloseTimer(websocket) {\n  websocket._closeTimer = setTimeout(\n    websocket._socket.destroy.bind(websocket._socket),\n    websocket._closeTimeout\n  );\n}\n\n/**\n * The listener of the socket `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written. If instead, the\n  // socket is paused, any possible buffered data will be read as a single\n  // chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    this._readableState.length !== 0\n  ) {\n    const chunk = this.read(this._readableState.length);\n\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the socket `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the socket `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the socket `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^WebSocket$\" }] */\n'use strict';\n\nconst WebSocket = require('./websocket');\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n", "'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst { Duplex } = require('stream');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { CLOSE_TIMEOUT, GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n   *     automatically send a pong in response to a ping\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Number} [options.closeTimeout=30000] Duration in milliseconds to\n   *     wait for the closing handshake to finish after `websocket.close()` is\n   *     called\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      allowSynchronousEvents: true,\n      autoPong: true,\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      closeTimeout: CLOSE_TIMEOUT,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (key === undefined || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 13 && version !== 8) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message, {\n        'Sec-WebSocket-Version': '13, 8'\n      });\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null, undefined, this.options);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      allowSynchronousEvents: this.options.allowSynchronousEvents,\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @param {Object} [headers] The HTTP response headers\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(\n  server,\n  req,\n  socket,\n  code,\n  message,\n  headers\n) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message, headers);\n  }\n}\n", "'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nWebSocket.WebSocket = WebSocket;\nWebSocket.WebSocketServer = WebSocket.Server;\n\nmodule.exports = WebSocket;\n", "\"use strict\";\n\nmodule.exports = require('ws');", "// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n", "export { default as api, withAPIKey, withAccessToken } from './api'\nexport type { ClientType, components, paths } from './api'\n\nexport { SANDBOX_DOMAIN, API_HOST } from './constants'\nexport type { SandboxOpts, DownloadFileFormat } from './sandbox'\nexport type { OpenPort } from './sandbox/codeSnippet'\nexport { Terminal, TerminalOutput } from './sandbox/terminal'\nexport type { TerminalManager } from './sandbox/terminal'\nexport type { FilesystemManager, FileInfo } from './sandbox/filesystem'\nexport {\n  default as FilesystemWatcher,\n  FilesystemOperation,\n} from './sandbox/filesystemWatcher'\nexport type {\n  FilesystemEvent,\n  FilesystemEventListener,\n} from './sandbox/filesystemWatcher'\n\nexport { Process, ProcessMessage, ProcessOutput } from './sandbox/process'\nexport type { ProcessManager } from './sandbox/process'\nexport type { EnvVars } from './sandbox/envVars'\nexport { runCode, CodeRuntime } from './runCode' // Export CodeRuntime enum as value, not as type, so it can be actually used in consumer code\nimport { Sandbox } from './sandbox/index'\n\nimport { DataAnalysis } from './templates/dataAnalysis'\nexport { DataAnalysis as CodeInterpreter }\n\nexport { Artifact, DataAnalysis } from './templates/dataAnalysis'\nexport type { RunPythonOpts } from './templates/dataAnalysis'\nexport type { SandboxMetadata, RunningSandbox } from './sandbox/sandboxConnection'\nexport type { Action } from './sandbox/index'\n\nexport { Sandbox }\nexport default Sandbox\n", "import * as fetcher from 'openapi-typescript-fetch'\nimport type { OpArgType, TypedFetch } from 'openapi-typescript-fetch'\n\nimport { API_HOST } from '../constants'\nimport type { components, paths } from './schema.gen'\nimport { defaultHeaders } from './metadata'\n\nconst { Fetcher } = fetcher\n\nconst client = Fetcher.for<paths>()\n\ntype ClientType = typeof client\n\nclient.configure({\n  baseUrl: API_HOST,\n  init: {\n    headers: defaultHeaders,\n  },\n})\n\ntype WithAccessToken<T> = (\n  accessToken: string,\n  arg: OpArgType<T>,\n  init?: RequestInit,\n) => ReturnType<TypedFetch<T>>\n\nexport function withAccessToken<T>(f: TypedFetch<T>) {\n  const wrapped = (accessToken: string, arg: OpArgType<T>, init?: RequestInit) => {\n    return f(arg, {\n      ...init,\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n        ...init?.headers,\n      },\n    })\n  }\n\n  wrapped.Error = f.Error\n\n  return wrapped as WithAccessToken<T> & {\n    Error: typeof f.Error\n  }\n}\n\ntype WithAPIKey<T> = (\n  apiKey: string,\n  arg: OpArgType<T>,\n  init?: RequestInit,\n) => ReturnType<TypedFetch<T>>\n\nexport function withAPIKey<T>(f: TypedFetch<T>) {\n  const wrapped = (apiKey: string, arg: OpArgType<T>, init?: RequestInit) => {\n    return f(arg, {\n      ...init,\n      headers: {\n        'X-API-KEY': apiKey,\n        ...init?.headers,\n      },\n    })\n  }\n\n  wrapped.Error = f.Error\n\n  return wrapped as WithAPIKey<T> & {\n    Error: typeof f.Error\n  }\n}\n\nexport default client\nexport type { components, paths, ClientType }\n", "export const SANDBOX_REFRESH_PERIOD = 5_000 // 5s\nexport const WS_RECONNECT_INTERVAL = 150 // 150ms\n\nexport const TIMEOUT = 60_000 // 60s\n\nconst DEBUG = process?.env?.E2B_DEBUG\nconst DOMAIN = process?.env?.E2B_DOMAIN || 'e2b.dev'\nexport const SECURE = (process?.env?.E2B_SECURE || 'true').toLowerCase() === 'true'\nexport const API_DOMAIN = DEBUG ? 'localhost:3000' : `api.${DOMAIN}`\nexport const API_HOST = `${SECURE && !DEBUG ? 'https' : 'http'}://${API_DOMAIN}`\nexport const SANDBOX_DOMAIN = DOMAIN\n\nexport const ENVD_PORT = 49982\nexport const WS_ROUTE = '/ws'\n\nexport const FILE_ROUTE = '/file'\n", "import platform from 'platform'\n\nimport { version } from '../../package.json'\n\ndeclare let window: any;\n\nexport const defaultHeaders = {\n  browser: (typeof window !== 'undefined' && platform.name) || 'undefined',\n  lang: 'js',\n  lang_version: platform.version || 'unknown',\n  package_version: version,\n  publisher: 'e2b',\n  sdk_runtime: typeof window === 'undefined' ? 'node' : 'browser',\n  system: platform.os?.family || 'unknown',\n}\n", "{\n  \"name\": \"@e2b/sdk\",\n  \"version\": \"0.12.5\",\n  \"description\": \"E2B SDK that give agents cloud environments\",\n  \"homepage\": \"https://e2b.dev\",\n  \"license\": \"MIT\",\n  \"author\": {\n    \"name\": \"FoundryLabs, Inc.\",\n    \"email\": \"hello@e2b.dev\",\n    \"url\": \"https://e2b.dev\"\n  },\n  \"bugs\": \"https://github.com/e2b-dev/e2b/issues\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/e2b-dev/e2b\",\n    \"directory\": \"packages/js-sdk\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"sideEffects\": false,\n  \"main\": \"dist/index.js\",\n  \"module\": \"dist/index.mjs\",\n  \"types\": \"dist/index.d.ts\",\n  \"scripts\": {\n    \"prepublishOnly\": \"pnpm build\",\n    \"build\": \"tsc --noEmit && tsup\",\n    \"dev\": \"tsup --watch\",\n    \"measure\": \"node test/performance.mjs\",\n    \"run\": \"node test/run.mjs\",\n    \"test\": \"vitest run\",\n    \"test:coverage\": \"vitest run --coverage\",\n    \"generate\": \"openapi-typescript ../../spec/openapi.yml -x api_key --support-array-length --alphabetize --output src/api/schema.gen.ts\",\n    \"check-deps\": \"knip\",\n    \"update-deps\": \"ncu -u && pnpm i\",\n    \"postPublish\": \"./scripts/post-publish.sh || true\"\n  },\n  \"peerDependencies\": {\n    \"openai\": \"^4.17.4\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^18.18.6\",\n    \"@types/normalize-path\": \"^3.0.0\",\n    \"@types/path-browserify\": \"^1.0.1\",\n    \"@types/platform\": \"^1.3.4\",\n    \"@types/ws\": \"^8.5.10\",\n    \"@typescript-eslint/eslint-plugin\": \"^6.8.0\",\n    \"@typescript-eslint/parser\": \"^6.8.0\",\n    \"knip\": \"^2.34.0\",\n    \"markdown-it\": \"^13.0.2\",\n    \"npm-check-updates\": \"^16.14.6\",\n    \"openapi-typescript\": \"^5.4.1\",\n    \"tsup\": \"^6.7.0\",\n    \"typescript\": \"^5.2.2\",\n    \"vitest\": \"^0.34.6\"\n  },\n  \"files\": [\n    \"dist\",\n    \"README.md\",\n    \"package.json\"\n  ],\n  \"keywords\": [\n    \"e2b\",\n    \"ai-agents\",\n    \"agents\",\n    \"ai\",\n    \"code-interpreter\",\n    \"sandbox\",\n    \"code\",\n    \"runtime\",\n    \"vm\",\n    \"nodejs\",\n    \"javascript\",\n    \"typescript\"\n  ],\n  \"dependencies\": {\n    \"isomorphic-ws\": \"^5.0.0\",\n    \"normalize-path\": \"^3.0.0\",\n    \"openapi-typescript-fetch\": \"^1.1.3\",\n    \"path-browserify\": \"^1.0.1\",\n    \"platform\": \"^1.3.6\",\n    \"ws\": \"^8.15.1\"\n  },\n  \"engines\": {\n    \"node\": \">=18\"\n  },\n  \"browserslist\": [\n    \"defaults\"\n  ],\n  \"optionalDependencies\": {\n    \"bufferutil\": \"^4.0.8\",\n    \"utf-8-validate\": \"^6.0.3\"\n  }\n}\n", "import { EnvVars } from './envVars'\nimport { SandboxConnection } from './sandboxConnection'\n\nexport const terminalService = 'terminal'\n\nexport class TerminalOutput {\n  private _data = ''\n\n  get data() {\n    return this._data\n  }\n\n  addData(data: string) {\n    this._data += data\n  }\n}\n\n/**\n * A terminal session running in the sandbox.\n *\n */\nexport class Terminal {\n  /**\n   * @deprecated use .wait() instead\n   */\n  readonly finished: Promise<TerminalOutput>\n\n  constructor(\n    readonly terminalID: string,\n    private readonly sandbox: SandboxConnection,\n    private readonly triggerExit: () => void,\n    finished: Promise<TerminalOutput>,\n    readonly output: TerminalOutput,\n  ) {\n    this.finished = finished\n  }\n\n  get data() {\n    return this.output.data\n  }\n\n  /**\n   * Kills the terminal session.\n   */\n  async kill(): Promise<void> {\n    try {\n      // TODO: Change the \"destroy\" to \"kill\" in devbookd\n      await this.sandbox._call(terminalService, 'destroy', [this.terminalID])\n    } finally {\n      this.triggerExit()\n      await this.finished\n    }\n  }\n\n  /**\n   * Waits for the terminal to finish.\n   */\n  async wait(): Promise<TerminalOutput> {\n    return this.finished\n  }\n\n  /**\n   * Sends data to the terminal standard input.\n   *\n   * @param data Data to send\n   */\n  async sendData(data: string): Promise<void> {\n    await this.sandbox._call(terminalService, 'data', [this.terminalID, data])\n  }\n\n  /**\n   * Resizes the terminal tty.\n   *\n   * @param cols Number of columns\n   * @param rows Number of rows\n   */\n  async resize({ cols, rows }: { cols: number; rows: number }): Promise<void> {\n    await this.sandbox._call(terminalService, 'resize', [\n      this.terminalID,\n      cols,\n      rows,\n    ])\n  }\n}\n\nexport type TerminalOpts = {\n  onData: (data: string) => Promise<void> | void;\n  onExit?: () => Promise<void> | void;\n  size: { cols: number; rows: number };\n  terminalID?: string;\n  /**\n   * If the `cmd` parameter is defined it will be executed as a command\n   * and this terminal session will exit when the command exits.\n   */\n  cmd?: string;\n  /**\n   * Working directory where will the terminal start.\n   */\n  cwd?: string;\n  /**\n   * @deprecated use cwd instead\n   */\n  rootDir?: string;\n  /**\n   * Environment variables that will be accessible inside of the terminal.\n   */\n  envVars?: EnvVars;\n  /**\n   * Timeout for terminal start in milliseconds (default is 60 seconds)\n   */\n  timeout?: number;\n};\n\n/**\n * Manager for starting and interacting with terminal sessions in the sandbox.\n */\nexport interface TerminalManager {\n  start(opts: TerminalOpts): Promise<Terminal>;\n}\n", "export class TimeoutError extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = 'TimeoutError';\n\t}\n}\n\n/**\nAn error to be thrown when the request is aborted by AbortController.\nDOMException is thrown instead of this Error when DOMException is available.\n*/\nexport class AbortError extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\t\tthis.name = 'AbortError';\n\t\tthis.message = message;\n\t}\n}\n\n/**\nTODO: Remove AbortError and just throw DOMException when targeting Node 18.\n*/\nconst getDOMException = errorMessage => globalThis.DOMException === undefined\n\t? new AbortError(errorMessage)\n\t: new DOMException(errorMessage);\n\n/**\nTODO: Remove below function and just 'reject(signal.reason)' when targeting Node 18.\n*/\nconst getAbortedReason = signal => {\n\tconst reason = signal.reason === undefined\n\t\t? getDOMException('This operation was aborted.')\n\t\t: signal.reason;\n\n\treturn reason instanceof Error ? reason : getDOMException(reason);\n};\n\nexport default function pTimeout(promise, options) {\n\tconst {\n\t\tmilliseconds,\n\t\tfallback,\n\t\tmessage,\n\t\tcustomTimers = { setTimeout, clearTimeout },\n\t} = options;\n\n\tlet timer;\n\n\tconst wrappedPromise = new Promise((resolve, reject) => {\n\t\tif (typeof milliseconds !== 'number' || Math.sign(milliseconds) !== 1) {\n\t\t\tthrow new TypeError(`Expected \\`milliseconds\\` to be a positive number, got \\`${milliseconds}\\``);\n\t\t}\n\n\t\tif (options.signal) {\n\t\t\tconst { signal } = options;\n\t\t\tif (signal.aborted) {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t}\n\n\t\t\tsignal.addEventListener('abort', () => {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t});\n\t\t}\n\n\t\tif (milliseconds === Number.POSITIVE_INFINITY) {\n\t\t\tpromise.then(resolve, reject);\n\t\t\treturn;\n\t\t}\n\n\t\t// We create the error outside of `setTimeout` to preserve the stack trace.\n\t\tconst timeoutError = new TimeoutError();\n\n\t\ttimer = customTimers.setTimeout.call(undefined, () => {\n\t\t\tif (fallback) {\n\t\t\t\ttry {\n\t\t\t\t\tresolve(fallback());\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof promise.cancel === 'function') {\n\t\t\t\tpromise.cancel();\n\t\t\t}\n\n\t\t\tif (message === false) {\n\t\t\t\tresolve();\n\t\t\t} else if (message instanceof Error) {\n\t\t\t\treject(message);\n\t\t\t} else {\n\t\t\t\ttimeoutError.message = message ?? `Promise timed out after ${milliseconds} milliseconds`;\n\t\t\t\treject(timeoutError);\n\t\t\t}\n\t\t}, milliseconds);\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tresolve(await promise);\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\t\t})();\n\t});\n\n\tconst cancelablePromise = wrappedPromise.finally(() => {\n\t\tcancelablePromise.clear();\n\t});\n\n\tcancelablePromise.clear = () => {\n\t\tcustomTimers.clearTimeout.call(undefined, timer);\n\t\ttimer = undefined;\n\t};\n\n\treturn cancelablePromise;\n}", "import pTimeout from './timeout'\n\nimport { TIMEOUT } from '../constants'\n\nexport function assertFulfilled<T>(\n  item: PromiseSettledResult<T>,\n): item is PromiseFulfilledResult<T> {\n  return item.status === 'fulfilled'\n}\n\nexport function formatSettledErrors<T>(settled: PromiseSettledResult<T>[]) {\n  if (settled.every(s => s.status === 'fulfilled')) return\n\n  return settled.reduce((prev, curr, i) => {\n    if (curr.status === 'rejected') {\n      return prev + '\\n' + `[${i}]: ` + `${JSON.stringify(curr)}`\n    }\n    return prev\n  }, 'errors:\\n')\n}\n\nexport function createDeferredPromise<T = void>() {\n  let resolve: (value: T) => void\n  let reject: (reason?: unknown) => void\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res\n    reject = rej\n  })\n\n  return {\n    promise,\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    reject: reject!,\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    resolve: resolve!,\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function withTimeout<T extends (...args: any[]) => any>(\n  fn: T,\n  timeout: number = TIMEOUT,\n): T {\n  if (timeout === undefined || timeout <= 0 || timeout === Number.POSITIVE_INFINITY) {\n    return fn\n  }\n\n  return ((...args: T extends (...args: infer A) => any ? A : never) =>\n    pTimeout(fn(...args), { milliseconds: timeout })) as T\n}\n", "import FilesystemWatcher from './filesystemWatcher'\nimport { CallOpts } from './sandboxConnection'\n\nexport const filesystemService = 'filesystem'\n\nexport interface FileInfo {\n  isDir: boolean;\n  name: string\n}\n\n/**\n * Manager for interacting with the filesystem in the sandbox.\n */\nexport interface FilesystemManager {\n  /**\n   * Writes content to a new file on path.\n   * @param path Path to a new file. For example '/dirA/dirB/newFile.txt' when creating 'newFile.txt'\n   * @param content Content to write to a new file\n   * @param opts Call options\n   * @param {timeout} [opts.timeout] Timeout for call in milliseconds (default is 60 seconds)\n   */\n  write(path: string, content: string, opts?: CallOpts): Promise<void>;\n  /**\n   * Write array of bytes to a file.\n   * This can be used when you cannot represent the data as an UTF-8 string.\n   *\n   * A new file will be created if it doesn't exist.\n   * If the file already exists, it will be overwritten.\n   * \n   * @param path path to a file\n   * @param content byte array representing the content to write\n   */\n  writeBytes(path: string, content: Uint8Array): Promise<void>;\n  /**\n   * Reads the whole content of a file.\n   * @param path Path to a file\n   * @param opts Call options\n   * @param {timeout} [opts.timeout] Timeout for call in milliseconds (default is 60 seconds)\n   * @returns Content of a file\n   */\n  read(path: string, opts?: CallOpts): Promise<string>;\n  /**\n   * Reads the whole content of a file as an array of bytes.\n   * @param path path to a file\n   * @returns byte array representing the content of a file\n   */\n  readBytes(path: string): Promise<Uint8Array>;\n  /**\n   * Removes a file or a directory.\n   * @param path Path to a file or a directory\n   * @param opts Call options\n   * @param {timeout} [opts.timeout] Timeout for call in milliseconds (default is 60 seconds)\n   */\n  remove(path: string, opts?: CallOpts): Promise<void>;\n  /**\n   * List files in a directory.\n   * @param path Path to a directory\n   * @param opts Call options\n   * @param {timeout} [opts.timeout] Timeout for call in milliseconds (default is 60 seconds)\n   * @returns Array of files in a directory\n   */\n  list(path: string, opts?: CallOpts): Promise<FileInfo[]>;\n  /**\n   * Creates a new directory and all directories along the way if needed on the specified pth.\n   * @param path Path to a new directory. For example '/dirA/dirB' when creating 'dirB'.\n   * @param opts Call options\n   * @param {timeout} [opts.timeout] Timeout for call in milliseconds (default is 60 seconds)\n   */\n  makeDir(path: string, opts?: CallOpts): Promise<void>;\n  /**\n   * Watches directory for filesystem events.\n   * @param path Path to a directory that will be watched\n   * @returns New watcher\n   */\n  watchDir(path: string): FilesystemWatcher;\n}\n", "import { withTimeout } from '../utils/promise'\nimport { filesystemService } from './filesystem'\nimport { CallOpts, SandboxConnection } from './sandboxConnection'\n\nexport enum FilesystemOperation {\n  Create = 'Create',\n  Write = 'Write',\n  Remove = 'Remove',\n  Rename = 'Rename',\n  Chmod = 'Chmod',\n}\n\nexport interface FilesystemEvent {\n  path: string;\n  name: string;\n  operation: FilesystemOperation;\n  // Unix epoch in nanoseconds\n  timestamp: number;\n  isDir: boolean;\n}\n\nexport type FilesystemEventListener = (event: FilesystemEvent) => Promise<void> | void;\n\nclass FilesystemWatcher {\n  // Listeners to filesystem events.\n  // Users of the this class can add their listeners to filesystem events\n  // via `this.addEventListeners`\n  private listeners: Set<FilesystemEventListener>\n  private rpcSubscriptionID?: string\n\n  constructor(\n    private sessConn: SandboxConnection,\n    private path: string,\n  ) {\n    this.listeners = new Set<FilesystemEventListener>()\n  }\n\n  // Starts watching the path that was passed to the contructor\n  async start(opts?: CallOpts) {\n    const start = async () => {\n      // Already started.\n      if (this.rpcSubscriptionID) return\n\n      this.handleFilesystemEvents = this.handleFilesystemEvents.bind(this)\n\n      this.rpcSubscriptionID = await this.sessConn._subscribe(\n        filesystemService,\n        this.handleFilesystemEvents,\n        'watchDir',\n        this.path,\n      )\n    }\n    return await withTimeout(start, opts?.timeout)()\n  }\n\n  // Stops watching the path and removes all listeners.\n  async stop() {\n    this.listeners.clear()\n    if (this.rpcSubscriptionID) {\n      await this.sessConn._unsubscribe(this.rpcSubscriptionID)\n    }\n  }\n\n  addEventListener(l: FilesystemEventListener) {\n    this.listeners.add(l)\n    return () => this.listeners.delete(l)\n  }\n\n  private handleFilesystemEvents(fsChange: FilesystemEvent) {\n    this.listeners.forEach((l) => {\n      l(fsChange)\n    })\n  }\n}\n\nexport default FilesystemWatcher\n", "import { EnvVars } from './envVars'\nimport { CallOpts, SandboxConnection } from './sandboxConnection'\nimport { withTimeout } from '../utils/promise'\n\nexport const processService = 'process'\n\n/**\n * A message from a process.\n */\nexport class ProcessMessage {\n  constructor(\n    public readonly line: string,\n    /**\n     * Unix epoch in nanoseconds\n     */\n    public readonly timestamp: number,\n    public readonly error: boolean,\n  ) {\n  }\n\n  public toString() {\n    return this.line\n  }\n}\n\n/**\n * Output from a process.\n */\nexport class ProcessOutput {\n  private readonly delimiter = '\\n'\n  private readonly messages: ProcessMessage[] = []\n  private _finished = false\n\n  private _error = false\n\n  private _exitCode?: number\n\n  /**\n   * Whether the process has errored.\n   */\n  get error(): boolean {\n    return this._error\n  }\n\n\n  /**\n   * The exit code of the process.\n   */\n  get exitCode(): number | undefined {\n    if (!this._finished) {\n      throw new Error('Process has not finished yet')\n    }\n    return this._exitCode\n  }\n\n  /**\n   * The stdout from the process.\n   */\n  get stdout(): string {\n    return this.messages\n      .filter((out) => !out.error)\n      .map((out) => out.line)\n      .join(this.delimiter)\n  }\n\n  /**\n   * The stderr from the process.\n   */\n  get stderr(): string {\n    return this.messages\n      .filter((out) => out.error)\n      .map((out) => out.line)\n      .join(this.delimiter)\n  }\n\n  addStdout(message: ProcessMessage) {\n    this.insertByTimestamp(message)\n  }\n\n  addStderr(message: ProcessMessage) {\n    this._error = true\n    this.insertByTimestamp(message)\n  }\n\n  setExitCode(exitCode: number) {\n    this._exitCode = exitCode\n    this._finished = true\n  }\n\n  private insertByTimestamp(message: ProcessMessage) {\n    let i = this.messages.length - 1\n    while (i >= 0 && this.messages[i].timestamp > message.timestamp) {\n      i -= 1\n    }\n    this.messages.splice(i + 1, 0, message)\n  }\n}\n\n/**\n * A process running in the sandbox.\n */\nexport class Process {\n  /**\n   * @deprecated use .wait() instead\n   */\n  readonly finished: Promise<ProcessOutput>\n\n  constructor(\n    readonly processID: string,\n    private readonly sandbox: SandboxConnection,\n    private readonly triggerExit: () => void,\n    finished: Promise<ProcessOutput>,\n    readonly output: ProcessOutput,\n  ) {\n    this.finished = finished\n  }\n\n  /**\n   * Kills the process.\n   */\n  async kill(): Promise<void> {\n    try {\n      await this.sandbox._call(processService, 'kill', [this.processID])\n    } finally {\n      this.triggerExit()\n      await this.finished\n    }\n  }\n\n  /**\n   * Waits for the process to finish.\n   *\n   * @param timeout Timeout for the process to finish in milliseconds\n   */\n  async wait(timeout?: number): Promise<ProcessOutput> {\n    return await withTimeout(() => this.finished, timeout)()\n  }\n\n  /**\n   * Sends data to the process stdin.\n   *\n   * @param data Data to send\n   * @param opts Call options\n   * @param {timeout} [opts.timeout] Timeout for call in milliseconds (default is 60 seconds)\n   */\n  async sendStdin(data: string, opts?: CallOpts): Promise<void> {\n    await this.sandbox._call(\n      processService,\n      'stdin',\n      [this.processID, data],\n      opts,\n    )\n  }\n}\n\nexport interface ProcessOpts {\n  cmd: string;\n  onStdout?: (out: ProcessMessage) => Promise<void> | void;\n  onStderr?: (out: ProcessMessage) => Promise<void> | void;\n  onExit?: (() => Promise<void> | void) | ((exitCode: number) => Promise<void> | void);\n  envVars?: EnvVars;\n  cwd?: string;\n  /** @deprecated Use cwd instead */\n  rootDir?: string;\n  processID?: string;\n  /** Timeout for the process to start in milliseconds */\n  timeout?: number;\n}\n\n/**\n * Manager for starting and interacting with processes in the sandbox.\n */\nexport interface ProcessManager {\n  /**\n   * Starts a new process.\n   * @param cmd Command to execute\n   * @returns New process\n   */\n  start(cmd: string): Promise<Process>;\n  /**\n   * Starts a new process.\n   * @param opts Process options\n   * @returns New process\n   */\n  start(opts: ProcessOpts): Promise<Process>;\n  /**\n   * Starts a new process and wait until it finishes.\n   * @param cmd Command to execute\n   * @returns New process\n   */\n  startAndWait(cmd: string): Promise<ProcessOutput>;\n  /**\n   * Starts a new process and wait until it finishes.\n   * @param opts Process options\n   * @returns New process\n   */\n  startAndWait(opts: ProcessOpts): Promise<ProcessOutput>;\n}\n", "import normalizePath from 'normalize-path'\n\nimport { ENVD_PORT, FILE_ROUTE } from '../constants'\nimport { id } from '../utils/id'\nimport { createDeferredPromise, formatSettledErrors, withTimeout } from '../utils/promise'\nimport { codeSnippetService, ScanOpenedPortsHandler as ScanOpenPortsHandler } from './codeSnippet'\nimport { FileInfo, FilesystemManager, filesystemService } from './filesystem'\nimport FilesystemWatcher from './filesystemWatcher'\nimport { Process, ProcessManager, ProcessMessage, ProcessOpts, ProcessOutput, processService } from './process'\nimport { CallOpts, SandboxConnection, SandboxConnectionOpts } from './sandboxConnection'\nimport { Terminal, TerminalManager, TerminalOpts, TerminalOutput, terminalService } from './terminal'\nimport { resolvePath } from '../utils/filesystem'\nimport { Actions } from '../templates/openai'\nimport { CurrentWorkingDirectoryDoesntExistError } from '../error'\n\nexport type DownloadFileFormat =\n  | 'base64'\n  | 'blob'\n  | 'buffer'\n  | 'arraybuffer'\n  | 'text'\n\nexport interface SandboxOpts extends SandboxConnectionOpts {\n  onScanPorts?: ScanOpenPortsHandler;\n  /** Timeout for sandbox to start */\n  timeout?: number;\n  onStdout?: (out: ProcessMessage) => Promise<void> | void;\n  onStderr?: (out: ProcessMessage) => Promise<void> | void;\n  onExit?: (() => Promise<void> | void) | ((exitCode: number) => Promise<void> | void);\n}\n\nexport interface Action<S extends Sandbox = Sandbox, T = {\n  [key: string]: any;\n}> {\n  (sandbox: S, args: T): string | Promise<string>;\n}\n\n/**\n * E2B cloud sandbox gives your agent a full cloud development environment that's sandboxed.\n * \n * That means:\n * - Access to Linux OS\n * - Using filesystem (create, list, and delete files and dirs)\n * - Run processes\n * - Sandboxed - you can run any code\n * - Access to the internet\n *\n * Check usage docs - https://e2b.dev/docs/sandbox/overview\n *\n * These cloud sandboxes are meant to be used for agents. Like a sandboxed playgrounds, where the agent can do whatever it wants. \n * \n * Use the {@link Sandbox.create} method to create a new sandbox.\n * \n * @example\n * ```ts\n * import { Sandbox } from '@e2b/sdk'\n * \n * const sandbox = await Sandbox.create()\n * \n * await sandbox.close()\n * ```\n */\nexport class Sandbox extends SandboxConnection {\n  /**\n   * Terminal manager used to create interactive terminals.\n   */\n  readonly terminal: TerminalManager\n  /**\n   * Filesystem manager used to manage files.\n   */\n  readonly filesystem: FilesystemManager\n  /**\n   * Process manager used to run commands.\n   */\n  readonly process: ProcessManager\n\n  // We use any here because we cannot properly reference the type of the Sandbox subclass\n  readonly _actions: Map<string, Action<any, any>> = new Map()\n\n  private readonly onScanPorts?: ScanOpenPortsHandler\n\n  /**\n   * Use `Sandbox.create()` instead.\n   * \n   * @hidden\n   * @hide\n   * @internal\n   * @access protected\n   */\n  constructor(opts?: SandboxOpts) {\n    opts = opts || {}\n    super(opts)\n    this.onScanPorts = opts.onScanPorts\n\n    // Init Filesystem handler\n    this.filesystem = {\n      list: async (path, opts?: CallOpts) => {\n        return (await this._call(\n          filesystemService,\n          'list',\n          [_resolvePath(path)],\n          opts,\n        )) as FileInfo[]\n      },\n      read: async (path, opts?: CallOpts) => {\n        return (await this._call(\n          filesystemService,\n          'read',\n          [_resolvePath(path)],\n          opts,\n        )) as string\n      },\n      remove: async (path, opts?: CallOpts) => {\n        await this._call(\n          filesystemService,\n          'remove',\n          [_resolvePath(path)],\n          opts,\n        )\n      },\n      write: async (path, content, opts?: CallOpts) => {\n        await this._call(\n          filesystemService,\n          'write',\n          [_resolvePath(path), content],\n          opts,\n        )\n      },\n      writeBytes: async (path: string, content: Uint8Array) => {\n        // We need to convert the byte array to base64 string without using browser or node specific APIs.\n        // This should be achieved by the node polyfills.\n        const base64Content = Buffer.from(content).toString('base64')\n        await this._call(filesystemService, 'writeBase64', [\n          _resolvePath(path),\n          base64Content,\n        ])\n      },\n      readBytes: async (path: string) => {\n        const base64Content = (await this._call(\n          filesystemService,\n          'readBase64',\n          [_resolvePath(path)],\n        )) as string\n        // We need to convert the byte array to base64 string without using browser or node specific APIs.\n        // This should be achieved by the node polyfills.\n        return Buffer.from(base64Content, 'base64')\n      },\n      makeDir: async (path, opts?: CallOpts) => {\n        await this._call(\n          filesystemService,\n          'makeDir',\n          [_resolvePath(path)],\n          opts,\n        )\n      },\n      watchDir: (path: string) => {\n        this.logger.debug?.(`Watching directory \"${path}\"`)\n        const npath = normalizePath(_resolvePath(path))\n        return new FilesystemWatcher(this, npath)\n      },\n    }\n\n    // Init Terminal handler\n    this.terminal = {\n      start: async ({\n        onData,\n        size,\n        onExit,\n        envVars,\n        cmd,\n        cwd = '',\n        terminalID = id(12),\n        timeout = undefined,\n      }: TerminalOpts) => {\n        const start = async ({\n          onData,\n          size,\n          onExit,\n          envVars,\n          cmd,\n          cwd = '',\n          rootDir,\n          terminalID = id(12),\n        }: Omit<TerminalOpts, 'timeout'>) => {\n          this.logger.debug?.(`Starting terminal \"${terminalID}\"`)\n          if (!cwd && rootDir) {\n            this.logger.warn?.(\n              'The rootDir parameter is deprecated, use cwd instead.',\n            )\n            cwd = rootDir\n          }\n          if (!cwd && this.cwd) {\n            cwd = this.cwd\n          }\n          envVars = envVars || {}\n          envVars = { ...this.envVars, ...envVars }\n\n          const { promise: terminalExited, resolve: triggerExit } =\n            createDeferredPromise()\n\n          const output = new TerminalOutput()\n\n          function handleData(data: string) {\n            output.addData(data)\n            onData?.(data)\n          }\n\n          const [onDataSubID, onExitSubID] = await this._handleSubscriptions(\n            this._subscribe(terminalService, handleData, 'onData', terminalID),\n            this._subscribe(terminalService, triggerExit, 'onExit', terminalID),\n          )\n\n          const { promise: unsubscribing, resolve: handleFinishUnsubscribing } =\n            createDeferredPromise<TerminalOutput>()\n\n          terminalExited.then(async () => {\n            Promise.allSettled([\n              this._unsubscribe(onExitSubID),\n              this._unsubscribe(onDataSubID),\n            ]).then((results) => {\n              const errMsg = formatSettledErrors(results)\n              if (errMsg) {\n                this.logger.debug?.(errMsg)\n              }\n            })\n\n            this.logger.debug?.(`Terminal \"${terminalID}\" exited`)\n\n            onExit?.()\n            handleFinishUnsubscribing(output)\n          })\n\n          try {\n            await this._call(terminalService, 'start', [\n              terminalID,\n              size.cols,\n              size.rows,\n              // Handle optional args for old devbookd compatibility\n              ...(cmd !== undefined ? [envVars, cmd, cwd] : []),\n            ])\n          } catch (err) {\n            triggerExit()\n            await unsubscribing\n            throw err\n          }\n\n          return new Terminal(\n            terminalID,\n            this,\n            triggerExit,\n            unsubscribing,\n            output,\n          )\n        }\n        return await withTimeout(\n          start,\n          timeout,\n        )({\n          onData,\n          size,\n          onExit,\n          envVars,\n          cmd,\n          cwd,\n          terminalID,\n        })\n      },\n    }\n\n    // Init Process handler\n    this.process = {\n      start: async (optsOrCmd: string | ProcessOpts) => {\n        const opts = typeof optsOrCmd === 'string' ? { cmd: optsOrCmd } : optsOrCmd\n        const start = async ({\n          cmd,\n          onStdout,\n          onStderr,\n          onExit,\n          envVars = {},\n          cwd = '',\n          rootDir,\n          processID = id(12),\n        }: Omit<ProcessOpts, 'timeout'>) => {\n          if (!cwd && rootDir) {\n            this.logger.warn?.(\n              'The rootDir parameter is deprecated, use cwd instead.',\n            )\n            cwd = rootDir\n          }\n          if (!cwd && this.cwd) {\n            cwd = this.cwd\n          }\n          if (!cmd) throw new Error('cmd is required')\n\n          envVars = envVars || {}\n          envVars = { ...this.envVars, ...envVars }\n\n          this.logger.debug?.(`Starting process \"${processID}\", cmd: \"${cmd}\"`)\n\n          const { promise: processExited, resolve: triggerExit } =\n            createDeferredPromise()\n\n          const output = new ProcessOutput()\n          const handleExit = (exitCode: number) => {\n            output.setExitCode(exitCode)\n            triggerExit()\n          }\n\n          const handleStdout = (data: { line: string; timestamp: number }) => {\n            const message = new ProcessMessage(\n              data.line,\n              data.timestamp,\n              false,\n            )\n            output.addStdout(message)\n\n            if (onStdout) {\n              onStdout(message)\n            } else if ((this.opts as SandboxOpts).onStdout) {\n              // @ts-expect-error TS2339\n              this.opts.onStdout(message)\n            }\n          }\n\n          const handleStderr = (data: { line: string; timestamp: number }) => {\n            const message = new ProcessMessage(data.line, data.timestamp, true)\n            output.addStderr(message)\n\n            if (onStderr) {\n              onStderr(message)\n            } else if ((this.opts as SandboxOpts).onStderr) {\n              // @ts-expect-error TS2339\n              this.opts.onStderr(message)\n            }\n          }\n\n          const [onExitSubID, onStdoutSubID, onStderrSubID] =\n            await this._handleSubscriptions(\n              this._subscribe(processService, handleExit, 'onExit', processID),\n              this._subscribe(\n                processService,\n                handleStdout,\n                'onStdout',\n                processID,\n              ),\n              this._subscribe(\n                processService,\n                handleStderr,\n                'onStderr',\n                processID,\n              ),\n            )\n\n          const { promise: unsubscribing, resolve: handleFinishUnsubscribing } =\n            createDeferredPromise<ProcessOutput>()\n\n          processExited.then(async () => {\n            Promise.allSettled([\n              this._unsubscribe(onExitSubID),\n              onStdoutSubID ? this._unsubscribe(onStdoutSubID) : undefined,\n              onStderrSubID ? this._unsubscribe(onStderrSubID) : undefined,\n            ]).then((results) => {\n              const errMsg = formatSettledErrors(results)\n              if (errMsg) {\n                this.logger.debug?.(errMsg)\n              }\n            })\n\n            this.logger.debug?.(`Process \"${processID}\" exited`)\n\n            if (onExit) {\n              onExit(output.exitCode || 0)\n            } else if ((this.opts as SandboxOpts).onExit) {\n              // @ts-expect-error TS2339\n              this.opts.onExit()\n            }\n\n            handleFinishUnsubscribing(output)\n          })\n\n          try {\n            await this._call(processService, 'start', [\n              processID,\n              cmd,\n              envVars,\n              cwd,\n            ])\n          } catch (err) {\n            triggerExit()\n            await unsubscribing\n            if (\n              /error starting process '\\w+': fork\\/exec \\/bin\\/bash: no such file or directory/.test((err as Error)?.message)\n            ) {\n              throw new CurrentWorkingDirectoryDoesntExistError(\n                `Failed to start the process. You are trying set 'cwd' to a directory that does not exist.\\n${(err as Error)?.message}`\n              )\n            }\n            throw err\n          }\n\n          return new Process(\n            processID,\n            this,\n            triggerExit,\n            unsubscribing,\n            output,\n          )\n        }\n        const timeout = opts.timeout\n        return await withTimeout(start, timeout)(opts)\n      },\n      startAndWait: async (optsOrCmd: string | ProcessOpts) => {\n        const opts = typeof optsOrCmd === 'string' ? { cmd: optsOrCmd } : optsOrCmd\n        const process = await this.process.start(opts)\n        const out = await process.wait()\n        return out\n      }\n    }\n\n    const _resolvePath = (path: string): string =>\n      resolvePath(path, this.cwd, this.logger)\n  }\n\n  /**\n   * URL that can be used to download or upload file to the sandbox via a multipart/form-data POST request.\n   * This is useful if you're uploading files directly from the browser.\n   * The file will be uploaded to the user's home directory with the same name.\n   * If a file with the same name already exists, it will be overwritten.\n   */\n  get fileURL() {\n    const protocol = this.getProtocol('http', this.opts.__debug_devEnv !== 'local')\n    const hostname = this.getHostname(this.opts.__debug_port || ENVD_PORT)\n    return `${protocol}://${hostname}${FILE_ROUTE}`\n  }\n\n  /**\n   * Returns a map of added actions.\n   *\n   * @returns Map of added actions\n   */\n  get actions() {\n    return new Map(this._actions)\n  }\n\n  /**\n   * OpenAI integration that can be used to get output for the actions added in the sandbox.\n   *\n   * @returns OpenAI integration\n   */\n  get openai() {\n    return {\n      actions: new Actions(this),\n    } as const\n  }\n\n  /**\n   * Creates a new Sandbox from the default `base` sandbox template.\n   * @returns New Sandbox\n   *\n   * @example\n   * ```ts\n   * const sandbox = await Sandbox.create()\n   * ```\n   * @constructs Sandbox\n   */\n  static async create<S extends typeof Sandbox>(this: S): Promise<InstanceType<S>>\n  /**\n   * Creates a new Sandbox from the template with the specified ID.\n   * @param template Sandbox template ID or name\n   * @returns New Sandbox\n   *\n   * @example\n   * ```ts\n   * const sandbox = await Sandbox.create(\"sandboxTemplateID\")\n   * ```\n   */\n  static async create<S extends typeof Sandbox>(this: S, template: string): Promise<InstanceType<S>>\n  /**\n   * Creates a new Sandbox from the specified options.\n   * @param opts Sandbox options\n   * @returns New Sandbox\n   *\n   * @example\n   * ```ts\n   * const sandbox = await Sandbox.create({\n   *   template: \"sandboxTemplate\",\n   *   onStdout: console.log,\n   * })\n   * ```\n   */\n  static async create<S extends typeof Sandbox>(this: S, opts: SandboxOpts): Promise<InstanceType<S>>\n  static async create(optsOrTemplate?: string | SandboxOpts) {\n    const opts: SandboxOpts | undefined = typeof optsOrTemplate === 'string' ? { template: optsOrTemplate } : optsOrTemplate\n    const sandbox = new Sandbox(opts)\n    await sandbox._open({ timeout: opts?.timeout })\n\n    return sandbox\n  }\n\n  /**\n   * Reconnects to an existing Sandbox.\n   * @param sandboxID Sandbox ID\n   * @returns Existing Sandbox\n   *\n   * @example\n   * ```ts\n   * const sandbox = await Sandbox.create()\n   * const sandboxID = sandbox.id\n   * \n   * await sandbox.keepAlive(300 * 1000)\n   * await sandbox.close()\n   * \n   * const reconnectedSandbox = await Sandbox.reconnect(sandboxID)\n   * ```\n   */\n  static async reconnect<S extends typeof Sandbox>(this: S, sandboxID: string): Promise<InstanceType<S>>\n  /**\n   * Reconnects to an existing Sandbox.\n   * @param opts Sandbox options\n   * @returns Existing Sandbox\n   *\n   * @example\n   * ```ts\n   * const sandbox = await Sandbox.create()\n   * const sandboxID = sandbox.id\n   * \n   * await sandbox.keepAlive(300 * 1000)\n   * await sandbox.close()\n   * \n   * const reconnectedSandbox = await Sandbox.reconnect({\n   *   sandboxID,\n   * })\n   * ```\n   */\n  static async reconnect<S extends typeof Sandbox>(this: S, opts: Omit<SandboxOpts, 'id' | 'template'> & { sandboxID: string }): Promise<InstanceType<S>>\n  static async reconnect<S extends typeof Sandbox>(this: S, sandboxIDorOpts: string | Omit<SandboxOpts, 'id' | 'template'> & { sandboxID: string }): Promise<InstanceType<S>> {\n    let id: string\n    let opts: SandboxOpts\n    if (typeof sandboxIDorOpts === 'string') {\n      id = sandboxIDorOpts\n      opts = {}\n    } else {\n      id = sandboxIDorOpts.sandboxID\n      opts = sandboxIDorOpts\n    }\n\n    const sandboxIDAndClientID = id.split('-')\n    const sandboxID = sandboxIDAndClientID[0]\n    const clientID = sandboxIDAndClientID[1]\n    opts.__sandbox = { sandboxID, clientID, templateID: 'unknown' }\n\n    const sandbox = new this(opts) as InstanceType<S>\n    await sandbox._open({ timeout: opts?.timeout })\n\n    return sandbox\n  }\n\n  /**\n   * Add a new action. The name of the action is automatically extracted from the function name.\n   *\n   * You can use this action with specific integrations like OpenAI to interact with the sandbox and get output for the action.\n   *\n   * @param action Action handler\n   * @returns Sandbox\n   *\n   * @example\n   * ```ts\n   * const sandbox = await Sandbox.create()\n   * sandbox.addAction('readFile', (sandbox, args) => sandbox.filesystem.read(args.path))\n   * ```\n   */\n  addAction<T = { [name: string]: any }>(action: Action<this, T>): this\n  /**\n   * Add a new action with a specified name.\n   *\n   * You can use this action with specific integrations like OpenAI to interact with the sandbox and get output for the action.\n   *\n   * @param name Action name\n   * @param action Action handler\n   * @returns Sandbox\n   *\n   * @example\n   * ```ts\n   * async function readFile(sandbox: Sandbox, args: any) {\n   *   return sandbox.filesystem.read(args.path)\n   * }\n   *\n   * const sandbox = await Sandbox.create()\n   * sandbox.addAction(readFile)\n   * ```\n   */\n  addAction<T = { [name: string]: any }>(name: string, action: Action<this, T>): this\n  addAction<T = { [name: string]: any }>(actionOrName: string | Action<this, T>, action?: Action<this, T>): this {\n    if (typeof actionOrName === 'string') {\n      if (!action) throw new Error('Action is required')\n      this._actions.set(actionOrName, action)\n      return this\n    } else if (typeof actionOrName === 'function') {\n      action = actionOrName\n\n      if (!action.name) {\n        throw new Error('Action name is required')\n      }\n\n      this._actions.set(action.name, action)\n    } else {\n      throw new Error('Action or action name and action is required')\n    }\n\n    return this\n  }\n\n  /**\n   * Remove an action.\n   * @param name Action name\n   * @returns Sandbox\n   *\n   * @example\n   * ```ts\n   * const sandbox = await Sandbox.create()\n   * sandbox.addAction('hello', (sandbox, args) => 'Hello World')\n   * sandbox.removeAction('hello')\n   * ```\n   */\n  removeAction(name: string) {\n    this._actions.delete(name)\n\n    return this\n  }\n\n  /**\n   * Uploads a file to the sandbox.\n   * The file will be uploaded to the user's home directory with the same name.\n   * If a file with the same name already exists, it will be overwritten.\n   *\n   * **You can use the {@link Sandbox.fileURL} property and upload file directly via POST multipart/form-data**\n   *\n   */\n  async uploadFile(file: Buffer | Blob, filename: string) {\n    const body = new FormData()\n\n    const blob =\n      file instanceof Blob\n        ? file\n        : new Blob([file], { type: 'application/octet-stream' })\n\n    body.append('file', blob, filename)\n\n    // TODO: Ensure the this is bound in this function\n    const response = await fetch(this.fileURL, {\n      method: 'POST',\n      body,\n    })\n\n    if (!response.ok) {\n      const text = await response.text()\n      throw new Error(\n        `Failed to upload file ${response.status} - ${response.statusText}: ${text}`,\n      )\n    }\n\n    return `/home/user/${filename}`\n  }\n\n  /**\n   * Downloads a file from the sandbox.\n   * @param remotePath Path to a file on the sandbox\n   * @param format Format of the downloaded file\n   * @returns File content\n   *\n   * @example\n   * ```ts\n   * const sandbox = await Sandbox.create()\n   * const content = await sandbox.downloadFile('/home/user/file.txt')\n   * ```\n   */\n  async downloadFile(remotePath: string, format?: DownloadFileFormat) {\n    remotePath = encodeURIComponent(remotePath)\n\n    // TODO: Ensure the this is bound in this function\n    const response = await fetch(`${this.fileURL}?path=${remotePath}`)\n    if (!response.ok) {\n      const text = await response.text()\n      throw new Error(`Failed to download file '${remotePath}': ${text}`)\n    }\n\n    switch (format) {\n      case 'base64':\n        return Buffer.from(await response.arrayBuffer()).toString('base64')\n      case 'blob':\n        return await response.blob()\n      case 'buffer':\n        return Buffer.from(await response.arrayBuffer())\n      case 'arraybuffer':\n        return await response.arrayBuffer()\n      case 'text':\n        return await response.text()\n      default:\n        return await response.arrayBuffer()\n    }\n  }\n\n  protected override async _open(opts: CallOpts) {\n    await super._open(opts)\n\n    const portsHandler = this.onScanPorts\n      ? (ports: { State: string; Ip: string; Port: number }[]) =>\n        this.onScanPorts?.(\n          ports.map((p) => ({ ip: p.Ip, port: p.Port, state: p.State })),\n        )\n      : undefined\n\n    await this._handleSubscriptions(\n      portsHandler\n        ? this._subscribe(codeSnippetService, portsHandler, 'scanOpenedPorts')\n        : undefined,\n    )\n\n    if (this.cwd) {\n      await this.filesystem.makeDir(this.cwd)\n    }\n\n    if ((this.opts as SandboxOpts).onStdout || (this.opts as SandboxOpts).onStderr) {\n      this.handleStartCmdLogs()\n    }\n\n    return this\n  }\n\n  private async handleStartCmdLogs() {\n    try {\n      await this.process.startAndWait({\n        cmd: 'sudo journalctl --follow --lines=all -o cat _SYSTEMD_UNIT=start_cmd.service',\n        envVars: {},\n        cwd: '/',\n      })\n    } catch (err) {\n      this.logger.debug?.('start command not started', err)\n    }\n  }\n}\n", "export function id(length: number) {\n  let result = ''\n  const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n  const charactersLength = characters.length\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength))\n  }\n  return result\n}\n", "export const codeSnippetService = 'codeSnippet'\n\nexport interface OpenPort {\n  state: string\n  ip: string\n  port: number\n}\n\nexport type ScanOpenedPortsHandler = (ports: OpenPort[]) => Promise<void> | void\n", "// Based on https://github.com/radarsu/rpc-websocket-client\n\nimport IWebSocket from 'isomorphic-ws';\n\nimport { id } from '../utils/id';\n\nexport type RpcEventFunction = (\n  // @ts-ignore\n  e: IWebSocket.OpenEvent | IWebSocket.ErrorEvent\n) => void;\nexport type RpcMessageEventFunction = (e: IWebSocket.MessageEvent) => void;\nexport type RpcCloseEventFunction = (e: IWebSocket.CloseEvent) => void;\n\nexport type RpcNotificationEvent = (data: IRpcNotification) => void;\nexport type RpcRequestEvent = (data: IRpcRequest) => void;\nexport type RpcSuccessResponseEvent = (data: IRpcSuccessResponse) => void;\nexport type RpcErrorResponseEvent = (data: IRpcErrorResponse) => void;\n\nexport enum RpcVersions {\n  RPC_VERSION = '2.0'\n}\n\nexport type RpcId = string | number;\n\nexport interface IRpcData {\n  method: string;\n  params?: any;\n}\n\nexport interface IRpcNotification extends IRpcData {\n  jsonrpc: RpcVersions.RPC_VERSION;\n}\n\nexport interface IRpcRequest extends IRpcNotification {\n  // if not included its notification\n  id: RpcId;\n}\n\nexport interface IRpcResponse {\n  id: RpcId;\n  jsonrpc: RpcVersions.RPC_VERSION;\n}\n\nexport interface IRpcSuccessResponse extends IRpcResponse {\n  // if not included its notification\n  result: any;\n}\n\nexport interface IRpcError {\n  code: number;\n  message: string;\n  data?: any;\n}\n\nexport interface IRpcErrorResponse extends IRpcResponse {\n  error: IRpcError;\n}\n\nexport interface IRpcWebSocketConfig {\n  responseTimeout: number;\n}\n\nexport type RpcUnidentifiedMessage =\n  | IRpcRequest\n  | IRpcNotification\n  | IRpcSuccessResponse\n  | IRpcErrorResponse;\n\nexport class RpcWebSocketClient {\n  // native websocket\n\n  public ws: IWebSocket;\n\n  public onOpenHandlers: RpcEventFunction[] = [];\n  public onAnyMessageHandlers: RpcMessageEventFunction[] = [];\n\n  public onNotification: RpcNotificationEvent[] = [];\n  public onRequest: RpcRequestEvent[] = [];\n  public onSuccessResponse: RpcSuccessResponseEvent[] = [];\n  public onErrorResponse: RpcErrorResponseEvent[] = [];\n\n  public onErrorHandlers: RpcEventFunction[] = [];\n  public onCloseHandlers: RpcCloseEventFunction[] = [];\n\n  public config: IRpcWebSocketConfig = {\n    responseTimeout: 10000\n  };\n\n  private idAwaiter: {\n    [id: string]: (data?: any) => void;\n  } = {};\n\n  // constructor\n  /**\n   * Does not start WebSocket connection!\n   * You need to call connect() method first.\n   * @memberof RpcWebSocketClient\n   */\n  public constructor() {\n    this.ws = undefined as any;\n  }\n\n  // public\n  /**\n   * Starts WebSocket connection. Returns Promise when connection is established.\n   * @param {string} url\n   * @param {(string | string[])} [protocols]\n   * @memberof RpcWebSocketClient\n   */\n  public connect(url: string, protocols?: string | string[]) {\n    this.ws = new IWebSocket(url, protocols);\n    return this.listen();\n  }\n\n  // events\n  public onOpen(fn: RpcEventFunction) {\n    this.onOpenHandlers.push(fn);\n  }\n\n  /**\n   * Native onMessage event. DO NOT USE THIS unless you really have to or for debugging purposes.\n   * Proper RPC events are onRequest, onNotification, onSuccessResponse and onErrorResponse (or just awaiting response).\n   * @param {RpcMessageEventFunction} fn\n   * @memberof RpcWebSocketClient\n   */\n  public onAnyMessage(fn: RpcMessageEventFunction) {\n    this.onAnyMessageHandlers.push(fn);\n  }\n\n  public onError(fn: RpcEventFunction) {\n    this.onErrorHandlers.push(fn);\n  }\n\n  public onClose(fn: RpcCloseEventFunction) {\n    this.onCloseHandlers.push(fn);\n  }\n\n  /**\n   * Appends onmessage listener on native websocket with RPC handlers.\n   * If onmessage function was already there, it will call it on beggining.\n   * Useful if you want to use RPC WebSocket Client on already established WebSocket along with function changeSocket().\n   * @memberof RpcWebSocketClient\n   */\n  public listenMessages() {\n    let previousOnMessage: RpcMessageEventFunction | undefined;\n    if (this.ws.onmessage) {\n      previousOnMessage = this.ws.onmessage.bind(this.ws);\n    }\n\n    this.ws.onmessage = (e: IWebSocket.MessageEvent) => {\n      if (previousOnMessage) {\n        previousOnMessage(e);\n      }\n\n      for (const handler of this.onAnyMessageHandlers) {\n        handler(e);\n      }\n\n      const data: RpcUnidentifiedMessage = JSON.parse(e.data.toString());\n      if (this.isNotification(data)) {\n        // notification\n        for (const handler of this.onNotification) {\n          handler(data);\n        }\n      } else if (this.isRequest(data)) {\n        // request\n        for (const handler of this.onRequest) {\n          handler(data);\n        }\n        // responses\n      } else if (this.isSuccessResponse(data)) {\n        // success\n        for (const handler of this.onSuccessResponse) {\n          handler(data);\n        }\n\n        // resolve awaiting function\n        this.idAwaiter[data.id](data.result);\n      } else if (this.isErrorResponse(data)) {\n        // error\n        for (const handler of this.onErrorResponse) {\n          handler(data);\n        }\n\n        // resolve awaiting function\n        this.idAwaiter[data.id](data.error);\n      }\n    };\n  }\n\n  // communication\n\n  /**\n   * Creates and sends RPC request. Resolves when appropirate response is returned from server or after config.responseTimeout.\n   * @param {string} method\n   * @param {*} [params]\n   * @returns\n   * @memberof RpcWebSocketClient\n   */\n  public call(method: string, params?: any) {\n    return new Promise((resolve, reject) => {\n      const data = this.buildRequest(method, params);\n\n      // give limited time for response\n      let timeout: number | NodeJS.Timeout;\n      if (this.config.responseTimeout) {\n        timeout = setTimeout(() => {\n          // stop waiting for response\n          delete this.idAwaiter[data.id];\n          reject(\n            new Error(`Awaiting response to \"${method}\" with id: ${data.id} timed out.`)\n          );\n        }, this.config.responseTimeout);\n      }\n\n      // expect response\n      this.idAwaiter[data.id] = (responseData?: any) => {\n        // stop timeout\n        clearInterval(timeout as number);\n        // stop waiting for response\n        delete this.idAwaiter[data.id];\n\n        if (this.isRpcError(responseData)) {\n          reject(new Error(`RPC Error (${responseData.code}): ${responseData.message}`));\n          return;\n        }\n\n        resolve(responseData);\n      };\n\n      const json = JSON.stringify(data);\n      this.ws.send(json);\n    });\n  }\n\n  /**\n   * Creates and sends RPC Notification.\n   * @param {string} method\n   * @param {*} [params]\n   * @memberof RpcWebSocketClient\n   */\n  public notify(method: string, params?: any) {\n    this.ws.send(JSON.stringify(this.buildNotification(method, params)));\n  }\n\n  // setup\n\n  /**\n   * You can provide custom id generation function to replace default uuid/v1.\n   * @param {() => string} idFn\n   * @memberof RpcWebSocketClient\n   */\n  public customId(idFn: () => string) {\n    this.idFn = idFn;\n  }\n\n  /**\n   * Removed jsonrpc from sent messages. Good if you don't care about standards or need better performance.\n   * @memberof RpcWebSocketClient\n   */\n  public noRpc() {\n    this.buildRequest = this.buildRequestBase;\n    this.buildNotification = this.buildNotificationBase;\n    this.buildRpcSuccessResponse = this.buildRpcSuccessResponseBase;\n    this.buildRpcErrorResponse = this.buildRpcErrorResponseBase;\n  }\n\n  /**\n   * Allows modifying configuration.\n   * @param {IRpcWebSocketConfig} options\n   * @memberof RpcWebSocketClient\n   */\n  public configure(options: IRpcWebSocketConfig) {\n    Object.assign(this.config, options);\n  }\n\n  /**\n   * Allows you to change used native WebSocket client to another one.\n   * If you have already-connected WebSocket, use this with listenMessages().\n   * @param {WebSocket} ws\n   * @memberof RpcWebSocketClient\n   */\n  public changeSocket(ws: IWebSocket) {\n    this.ws = ws;\n  }\n\n  // private\n\n  // events\n  private listen() {\n    return new Promise((resolve, reject) => {\n      // @ts-ignore\n      this.ws.onopen = (e: IWebSocket.OpenEvent) => {\n        for (const handler of this.onOpenHandlers) {\n          handler(e);\n        }\n        resolve(e);\n      };\n\n      // listen for messages\n      this.listenMessages();\n\n      // called before onclose\n      this.ws.onerror = (e: IWebSocket.ErrorEvent) => {\n        for (const handler of this.onErrorHandlers) {\n          handler(e);\n        }\n      };\n\n      this.ws.onclose = (e: IWebSocket.CloseEvent) => {\n        for (const handler of this.onCloseHandlers) {\n          handler(e);\n        }\n        reject(new Error(`WebSocket closed with code: ${e.code} and reason: ${e.reason}`));\n      };\n    });\n  }\n\n  // request\n  private buildRequest(method: string, params?: any): IRpcRequest {\n    const data = this.buildRequestBase(method, params);\n    data.jsonrpc = RpcVersions.RPC_VERSION;\n    return data;\n  }\n\n  private buildRequestBase(method: string, params?: any): IRpcRequest {\n    const data: IRpcRequest = {} as any;\n    data.id = this.idFn();\n    data.method = method;\n\n    if (params) {\n      data.params = params;\n    }\n\n    return data;\n  }\n\n  // notification\n  private buildNotification(method: string, params?: any): IRpcNotification {\n    const data = this.buildNotificationBase(method, params);\n    data.jsonrpc = RpcVersions.RPC_VERSION;\n    return data;\n  }\n\n  private buildNotificationBase(\n    method: string,\n    params?: any\n  ): IRpcNotification {\n    const data: IRpcNotification = {} as any;\n    data.method = method;\n\n    if (params) {\n      data.params = params;\n    }\n\n    return data;\n  }\n\n  // success response\n  private buildRpcSuccessResponse(\n    id: RpcId,\n    result: any\n  ): IRpcSuccessResponse {\n    const data = this.buildRpcSuccessResponseBase(id, result);\n    data.jsonrpc = RpcVersions.RPC_VERSION;\n    return data;\n  }\n\n  private buildRpcSuccessResponseBase(\n    id: RpcId,\n    result: any\n  ): IRpcSuccessResponse {\n    const data: IRpcSuccessResponse = {} as any;\n    data.id = id;\n    data.result = result;\n    return data;\n  }\n\n  // error response\n  private buildRpcErrorResponse(\n    id: RpcId,\n    error: IRpcError\n  ): IRpcErrorResponse {\n    const data = this.buildRpcErrorResponseBase(id, error);\n    data.jsonrpc = RpcVersions.RPC_VERSION;\n    return data;\n  }\n\n  private buildRpcErrorResponseBase(\n    id: RpcId,\n    error: IRpcError\n  ): IRpcErrorResponse {\n    const data: IRpcErrorResponse = {} as any;\n    data.id = id;\n    data.error = error;\n    return data;\n  }\n\n  private idFn(): RpcId {\n    return id(12);\n  }\n\n  // tests\n  private isNotification(\n    data: RpcUnidentifiedMessage\n  ): data is IRpcNotification {\n    return !(data as any).id;\n  }\n\n  private isRequest(data: RpcUnidentifiedMessage): data is IRpcRequest {\n    return (data as any).method;\n  }\n\n  private isSuccessResponse(\n    data: RpcUnidentifiedMessage\n  ): data is IRpcSuccessResponse {\n    // eslint-disable-next-line no-prototype-builtins\n    return data.hasOwnProperty(`result`);\n  }\n\n  private isErrorResponse(\n    data: RpcUnidentifiedMessage\n  ): data is IRpcErrorResponse {\n    // eslint-disable-next-line no-prototype-builtins\n    return data.hasOwnProperty(`error`);\n  }\n\n  private isRpcError(data: any): data is IRpcError {\n    return typeof data?.code !== 'undefined';\n  }\n}\n", "function wait(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n\nexport default wait\n", "export class TimeoutError extends Error {\n  constructor(message: any) {\n    super(message)\n    this.name = 'TimeoutError'\n  }\n}\n\nexport class AuthenticationError extends Error {\n  constructor(message: any) {\n    super(message)\n    this.name = 'AuthenticationError'\n  }\n}\n\nexport class CurrentWorkingDirectoryDoesntExistError extends Error {\n  constructor(message: any) {\n    super(message)\n    this.name = 'CurrentWorkingDirectoryDoesntExistError'\n  }\n}", "import { AuthenticationError } from '../error'\n\nexport function getApiKey(apiKey?: string): string {\n  apiKey = apiKey || process?.env?.E2B_API_KEY\n\n  if (!apiKey) {\n    throw new AuthenticationError(\n      'API key is required, please visit https://e2b.dev/docs to get your API key. ' +\n      'You can either set the environment variable `E2B_API_KEY` ' +\n      \"or you can pass it directly to the sandbox like Sandbox.create({apiKey: 'e2b_...'})\",\n    )\n  }\n\n  return apiKey\n}", "import { IRpcNotification, RpcWebSocketClient } from './rpc'\n\nimport api, { components, withAPIKey } from '../api'\nimport { ENVD_PORT, SANDBOX_DOMAIN, SANDBOX_REFRESH_PERIOD, SECURE, WS_RECONNECT_INTERVAL, WS_ROUTE } from '../constants'\nimport { assertFulfilled, formatSettledErrors, withTimeout } from '../utils/promise'\nimport wait from '../utils/wait'\nimport { codeSnippetService } from './codeSnippet'\nimport { filesystemService } from './filesystem'\nimport { processService } from './process'\nimport { terminalService } from './terminal'\nimport { EnvVars } from './envVars'\nimport { getApiKey } from '../utils/apiKey'\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype SubscriptionHandler = (result: any) => void\n\ntype Service =\n  | typeof processService\n  | typeof codeSnippetService\n  | typeof filesystemService\n  | typeof terminalService\n\ninterface Subscriber {\n  service: Service;\n  subID: string;\n  handler: SubscriptionHandler;\n}\n\nexport interface Logger {\n  debug?: (message: string, ...args: unknown[]) => void;\n  info?: (message: string, ...args: unknown[]) => void;\n  warn?: (message: string, ...args: unknown[]) => void;\n  error?: (message: string, ...args: unknown[]) => void;\n}\n\nexport interface SandboxMetadata {\n  [key: string]: string;\n}\n\nexport interface RunningSandbox {\n  sandboxID: string;\n  templateID: string;\n  alias?: string;\n  metadata?: SandboxMetadata;\n  startedAt: Date;\n}\n\nexport interface SandboxConnectionOpts {\n  /**\n   * Sandbox Template ID or name.\n   *\n   * If not specified, the 'base' template will be used.\n   */\n  template?: string;\n  /**\n   * @deprecated Use `template` instead.\n   *\n   * Sandbox Template ID or name.\n   */\n  id?: string;\n  apiKey?: string;\n  cwd?: string;\n  envVars?: EnvVars;\n  /**\n   * A dictionary of strings that is stored alongside the running sandbox.\n   * You can see this metadata when you list running sandboxes.\n   */\n  metadata?: SandboxMetadata;\n  logger?: Logger;\n  __sandbox?: components['schemas']['Sandbox'];\n  __debug_hostname?: string;\n  __debug_port?: number;\n  __debug_devEnv?: 'remote' | 'local';\n}\n\nexport interface CallOpts {\n  /** Timeout for the call in milliseconds */\n  timeout?: number;\n}\n\nconst listSandboxes = withAPIKey(\n  api.path('/sandboxes').method('get').create(),\n)\nconst createSandbox = withAPIKey(\n  api.path('/sandboxes').method('post').create(),\n)\nconst killSandbox = withAPIKey(\n  api.path('/sandboxes/{sandboxID}').method('delete').create(),\n)\nconst refreshSandbox = withAPIKey(\n  api.path('/sandboxes/{sandboxID}/refreshes').method('post').create(),\n)\n\nexport class SandboxConnection {\n  /**\n   * Default working directory used in the sandbox.\n   * \n   * You can change the working directory by setting the `cwd` property.\n   **/\n  cwd: string | undefined\n  /**\n   * Default environment variables used in the sandbox.\n   * \n   * You can change the environment variables by setting the `envVars` property.\n   **/\n  envVars: EnvVars\n\n  protected readonly logger: Logger\n  protected sandbox?: components['schemas']['Sandbox']\n  protected isOpen = false\n\n  private readonly apiKey: string\n  private readonly rpc = new RpcWebSocketClient()\n  private subscribers: Subscriber[] = []\n\n  // let's keep opts readonly, but public - for convenience, mainly when debugging\n  protected constructor(readonly opts: SandboxConnectionOpts) {\n    this.sandbox = opts.__sandbox\n    this.apiKey = getApiKey(opts.apiKey)\n\n\n    this.cwd = opts.cwd\n    if (this.cwd && this.cwd.startsWith('~')) {\n      this.cwd = this.cwd.replace('~', '/home/user')\n    }\n\n    const defaultEnvVars = { PYTHONUNBUFFERED: '1' }\n\n    this.envVars = { ...defaultEnvVars, ...opts.envVars || {} }\n\n    this.logger = opts.logger ?? {\n      // by default, we log to the console\n      // we don't log debug messages by default\n      info: console.info,\n      warn: console.warn,\n      error: console.error,\n    }\n    this.logger.debug?.(`Sandbox \"${this.templateID}\" initialized`)\n  }\n\n  /**\n   * ID of the sandbox.\n   * \n   * You can use this ID to reconnect to the sandbox later.\n   */\n  get id() {\n    return `${this.sandbox?.sandboxID}-${this.sandbox?.clientID}`\n  }\n\n  private get templateID(): string {\n    return this.opts.template || this.opts.id || 'base'\n  }\n\n  /**\n   * List all running sandboxes\n   * \n   * @param apiKey API key to use for authentication. If not provided, the `E2B_API_KEY` environment variable will be used.\n   */\n  static async list(apiKey?: string): Promise<RunningSandbox[]> {\n    apiKey = getApiKey(apiKey)\n\n    try {\n      const res = await listSandboxes(apiKey, {})\n\n      return res.data.map(sandbox => ({\n        sandboxID: `${sandbox.sandboxID}-${sandbox.clientID}`,\n        templateID: sandbox.templateID,\n        cpuCount: sandbox.cpuCount,\n        memoryMB: sandbox.memoryMB,\n        ...sandbox.alias && { alias: sandbox.alias },\n        ...sandbox.metadata && { metadata: sandbox.metadata },\n        startedAt: new Date(sandbox.startedAt),\n      }))\n\n    } catch (e) {\n      if (e instanceof listSandboxes.Error) {\n        const error = e.getActualType()\n        if (error.status === 401) {\n          throw new Error(\n            `Error listing sandboxes - (${error.status}) unauthenticated: ${error.data.message}`,\n          )\n        }\n        if (error.status === 500) {\n          throw new Error(\n            `Error listing sandboxes - (${error.status}) server error: ${error.data.message}`,\n          )\n        }\n      }\n      throw e\n    }\n  }\n\n  /**\n   * List all running sandboxes\n   * @param sandboxID ID of the sandbox to kill\n   * @param apiKey API key to use for authentication. If not provided, the `E2B_API_KEY` environment variable will be used.\n   */\n  static async kill(sandboxID: string, apiKey?: string): Promise<void> {\n    apiKey = getApiKey(apiKey)\n\n    const shortID = sandboxID.split('-')[0]\n\n    try {\n      await killSandbox(apiKey, {sandboxID: shortID})\n    } catch (e) {\n      if (e instanceof killSandbox.Error) {\n        const error = e.getActualType()\n        if (error.status === 401) {\n          throw new Error(\n            `Error killing sandbox (${sandboxID}) - (${error.status}) unauthenticated: ${error.data.message}`,\n          )\n        }\n        if (error.status === 500) {\n          throw new Error(\n            `Error killing sandbox (${sandboxID}) - (${error.status}) server error: ${error.data.message}`,\n          )\n        }\n      }\n      throw e\n    }\n  }\n\n  /**\n   * Keep the sandbox alive for the specified duration.\n   *\n   * `keepAlive` method requires `this` context - you may need to bind it.\n   * @param duration Duration in milliseconds. Must be between 0 and 3600000 milliseconds\n   * @returns Promise that resolves when the sandbox is kept alive\n   */\n  public async keepAlive(duration: number) {\n    duration = Math.round(duration / 1000)\n\n    if (duration < 0 || duration > 3600) {\n      throw new Error('Duration must be between 0 and 3600 seconds')\n    }\n\n    if (!this.sandbox) {\n      throw new Error('Cannot keep alive - sandbox is not initialized')\n    }\n    await refreshSandbox(this.apiKey, {\n      sandboxID: this.sandbox?.sandboxID, duration,\n    })\n  }\n\n  /**\n   * Get the hostname for the sandbox or for the specified sandbox's port.\n   *\n   * `getHostname` method requires `this` context - you may need to bind it.\n   *\n   * @param port Specify if you want to connect to a specific port of the sandbox\n   * @returns Hostname of the sandbox or sandbox's port\n   */\n  getHostname(port?: number) {\n    if (this.opts.__debug_hostname) {\n      // Debugging remotely (with GitPod) and on local needs different formats of the hostname.\n      if (port && this.opts.__debug_devEnv === 'remote') {\n        return `${port}-${this.opts.__debug_hostname}`\n      } else if (port) {\n        return `${this.opts.__debug_hostname}:${port}`\n      } else {\n        return this.opts.__debug_hostname\n      }\n    }\n\n    if (!this.sandbox) {\n      throw new Error('Cannot get sandbox\\'s hostname - sandbox is not initialized')\n    }\n\n    const hostname = `${this.id}.${SANDBOX_DOMAIN}`\n    if (port) {\n      return `${port}-${hostname}`\n    } else {\n      return hostname\n    }\n  }\n\n  /**\n   * The function decides whether to use the secure or insecure protocol.\n   * @param baseProtocol Specify the specific protocol you want to use. Do not include the `s` in `https` or `wss`.\n   * @param secure Specify if you want to use the secure protocol\n   * @returns Protocol for the connection to the sandbox\n   */\n  getProtocol(baseProtocol: string = 'http', secure: boolean = SECURE) {\n    return secure ? `${baseProtocol}s` : baseProtocol\n  }\n\n  /**\n   * Close the connection to the sandbox\n   *\n   * `close` method requires `this` context - you may need to bind it.\n   */\n  async close() {\n    if (this.isOpen) {\n      this.logger.debug?.(`Closing sandbox \"${this.id}\"`)\n      this.isOpen = false\n\n      // This is `ws` way of closing connection\n      this.rpc.ws?.terminate?.()\n      // This is the browser WebSocket way of closing connection\n      this.rpc.ws?.close?.()\n      this.subscribers = []\n\n      this.logger.debug?.('Disconnected from the sandbox')\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async _call(\n    service: Service,\n    method: string,\n    params?: any[],\n    opts?: CallOpts,\n  ) {\n    this.logger.debug?.(`Calling \"${service}_${method}\" with params:`, params)\n\n    // Without the async function, the `this` context is lost.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const call = async (method: string, params?: any[]) =>\n      await this.rpc.call(method, params)\n\n    return await withTimeout(call, opts?.timeout)(\n      `${service}_${method}`,\n      params,\n    )\n  }\n\n  async _handleSubscriptions<\n    T extends (ReturnType<SandboxConnection['_subscribe']> | undefined)[],\n  >(\n    ...subs: T\n  ): Promise<{\n    [P in keyof T]: Awaited<T[P]>;\n  }> {\n    const results = await Promise.allSettled(subs)\n\n    if (results.every((r) => r.status === 'fulfilled')) {\n      return results.map((r) =>\n        r.status === 'fulfilled' ? r.value : undefined,\n      ) as {\n          [P in keyof T]: Awaited<T[P]>;\n        }\n    }\n\n    await Promise.all(\n      results\n        .filter(assertFulfilled)\n        .map((r) => (r.value ? this._unsubscribe(r.value) : undefined)),\n    )\n\n    throw new Error(formatSettledErrors(results))\n  }\n\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  async _unsubscribe(subID: string) {\n    const subscription = this.subscribers.find((s) => s.subID === subID)\n    if (!subscription) return\n\n    await this._call(subscription.service, 'unsubscribe', [subscription.subID])\n\n    this.subscribers = this.subscribers.filter((s) => s !== subscription)\n    this.logger.debug?.(\n      `Unsubscribed '${subID}' from '${subscription.service}'`,\n    )\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/member-ordering\n  async _subscribe(\n    service: Service,\n    handler: SubscriptionHandler,\n    method: string,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ...params: any[]\n  ) {\n    const subID = await this._call(service, 'subscribe', [method, ...params])\n\n    if (typeof subID !== 'string') {\n      throw new Error(\n        `Cannot subscribe to ${service}_${method}${params.length > 0 ? ' with params [' + params.join(', ') + ']' : ''\n        }. Expected response should have been a subscription ID, instead we got ${JSON.stringify(\n          subID,\n        )}`,\n      )\n    }\n\n    this.subscribers.push({\n      handler,\n      service,\n      subID,\n    })\n    this.logger.debug?.(\n      `Subscribed to \"${service}_${method}\"${params.length > 0 ? ' with params [' + params.join(', ') + '] and' : ''\n      } with id \"${subID}\"`,\n    )\n\n    return subID\n  }\n\n  /**\n   * Open a connection to a new sandbox\n   *\n   * `open` method requires `this` context - you may need to bind it.\n   * @param opts Call options\n   * @param {timeout} [opts.timeout] Timeout for sandbox to open in milliseconds (default is 60 seconds)\n   */\n  protected async _open(opts: CallOpts) {\n    const open = async () => {\n      if (this.isOpen) {\n        throw new Error('Sandbox connect was already called')\n      } else {\n        this.isOpen = true\n      }\n      this.logger.debug?.('Opening sandbox...')\n\n      if (!this.sandbox && !this.opts.__debug_hostname) {\n        try {\n          const res = await createSandbox(this.apiKey, {\n            templateID: this.templateID,\n            metadata: this.opts.metadata,\n          })\n\n          this.sandbox = res.data\n          this.logger.debug?.(`Acquired sandbox \"${this.id}\"`)\n        } catch (e) {\n          if (e instanceof createSandbox.Error) {\n            const error = e.getActualType()\n            if (error.status === 400) {\n              throw new Error(\n                `Error creating sandbox - (${error.status}) bad request: ${error.data.message}`,\n              )\n            }\n            if (error.status === 401) {\n              throw new Error(\n                `Error creating sandbox - (${error.status}) unauthenticated: ${error.data.message}`,\n              )\n            }\n            if (error.status === 500) {\n              throw new Error(\n                `Error creating sandbox - (${error.status}) server error: ${error.data.message}`,\n              )\n            }\n          }\n          throw e\n        }\n      }\n\n      if (this.sandbox && !this.opts.__debug_hostname) {\n        this.refresh(this.sandbox.sandboxID)\n      }\n\n      await this.connectRpc()\n      return this\n    }\n\n    try {\n      return await withTimeout(open, opts?.timeout)()\n    } catch (err) {\n      await this.close()\n      throw err\n    }\n  }\n\n  private async connectRpc() {\n    const hostname = this.getHostname(this.opts.__debug_port || ENVD_PORT)\n    const protocol = this.getProtocol('ws', this.opts.__debug_devEnv !== 'local')\n    const sandboxURL = `${protocol}://${hostname}${WS_ROUTE}`\n\n    let isFinished = false\n    let resolveOpening: (() => void) | undefined\n    let rejectOpening: (() => void) | undefined\n\n    const openingPromise = new Promise<void>((resolve, reject) => {\n      resolveOpening = () => {\n        if (isFinished) return\n        isFinished = true\n        resolve()\n      }\n      rejectOpening = () => {\n        if (isFinished) return\n        isFinished = true\n        reject()\n      }\n    })\n\n    this.rpc.onOpen(() => {\n      this.logger.debug?.(\n        `Connected to sandbox \"${this.id}\"`,\n      )\n      resolveOpening?.()\n    })\n\n    this.rpc.onError(async (err) => {\n      this.logger.debug?.(\n        `Error in WebSocket of sandbox \"${this.id}\": ${err.message ?? err.code ?? err.toString()\n        }. Trying to reconnect...`,\n      )\n\n      if (this.isOpen) {\n        await wait(WS_RECONNECT_INTERVAL)\n        this.logger.debug?.(\n          `Reconnecting to sandbox \"${this.id}\"`,\n        )\n        try {\n          // When the WS connection closes the subscribers in devbookd are removed.\n          // We want to delete the subscriber handlers here so there are no orphans.\n          this.subscribers = []\n          await this.rpc.connect(sandboxURL)\n          this.logger.debug?.(\n            `Reconnected to sandbox \"${this.id}\"`,\n          )\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        } catch (err: any) {\n          // not warn, because this is somewhat expected behaviour during initialization\n          this.logger.debug?.(\n            `Failed reconnecting to sandbox \"${this.id}\": ${err.message ?? err.code ?? err.toString()\n            }`,\n          )\n        }\n      } else {\n        rejectOpening?.()\n      }\n    })\n\n    this.rpc.onClose(async () => {\n      this.logger.debug?.(\n        `WebSocket connection to sandbox \"${this.id}\" closed`,\n      )\n    })\n\n    this.rpc.onNotification.push(this.handleNotification.bind(this));\n\n    // We invoke the rpc.connect method in a separate promise because when using edge\n    // the rpc.connect does not throw or end on error.\n    (async () => {\n      try {\n        this.logger.debug?.(\n          `Connecting to sandbox \"${this.id}\"`,\n        )\n        await this.rpc.connect(sandboxURL)\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      } catch (err: any) {\n        // not warn, because this is somewhat expected behaviour during initialization\n        this.logger.debug?.(\n          `Error connecting to sandbox \"${this.id}\": ${err.message ?? err.code ?? err.toString()\n          }`,\n        )\n      }\n    })()\n\n    await openingPromise\n  }\n\n  private handleNotification(data: IRpcNotification) {\n    this.logger.debug?.('Handling notification:', data)\n    this.subscribers\n      .filter((s) => s.subID === data.params?.subscription)\n      .forEach((s) => s.handler(data.params?.result))\n  }\n\n  private async refresh(sandboxID: string) {\n    this.logger.debug?.(`Started refreshing sandbox \"${sandboxID}\"`)\n\n    try {\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        if (!this.isOpen) {\n          this.logger.debug?.(\n            `Cannot refresh sandbox ${this.id} - it was closed`,\n          )\n          return\n        }\n\n        await wait(SANDBOX_REFRESH_PERIOD)\n\n        try {\n          await refreshSandbox(this.apiKey, {\n            sandboxID, duration: 0,\n          })\n          this.logger.debug?.(`Refreshed sandbox \"${sandboxID}\"`)\n        } catch (e) {\n          if (e instanceof refreshSandbox.Error) {\n            const error = e.getActualType()\n            if (error.status === 404) {\n              this.logger.warn?.(\n                `Error refreshing sandbox - (${error.status}): ${error.data.message}`,\n              )\n              return\n            }\n            this.logger.warn?.(\n              `Refreshing sandbox \"${sandboxID}\" failed - (${error.status})`,\n            )\n          }\n        }\n      }\n    } finally {\n      this.logger.debug?.(`Stopped refreshing sandbox \"${sandboxID}\"`)\n      await this.close()\n    }\n  }\n}\n", "import path from 'path-browserify'\n\nimport { Logger } from '../sandbox/sandboxConnection'\n\nexport const resolvePath = (\n  inputPath: string,\n  cwd: string | undefined,\n  logger: Logger,\n): string => {\n  let result: string\n  if (inputPath.startsWith('./')) {\n    result = path.posix.join(cwd || '/home/user', inputPath)\n    if (!cwd) {\n      logger.warn?.(\n        `Path starts with './' and cwd isn't set. The path '${inputPath}' will evaluate to '${result}', which may not be what you want.`,\n      )\n    }\n    return result\n  }\n\n  if (inputPath.startsWith('../')) {\n    result = path.posix.join(cwd || '/home/user', inputPath)\n    if (!cwd) {\n      logger.warn?.(\n        `Path starts with '../' and cwd isn't set. The path '${inputPath}' will evaluate to '${result}', which may not be what you want.`,\n      )\n    }\n    return result\n  }\n  if (inputPath.startsWith('~/')) {\n    result = path.posix.join(cwd || '/home/user', inputPath.substring(2))\n    if (!cwd) {\n      logger.warn?.(\n        `Path starts with '~/' and cwd isn't set. The path '${inputPath}' will evaluate to '${result}', which may not be what you want.`,\n      )\n    }\n    return result\n  }\n\n  if (!inputPath.startsWith('/') && cwd) {\n    return path.posix.join(cwd, inputPath)\n  }\n\n  return inputPath\n}\n", "import type { Run, RunSubmitToolOutputsParams } from 'openai/resources/beta/threads/runs/runs'\n\nimport type { Sandbox } from '../sandbox'\n\n\nexport class Actions {\n  constructor(private readonly sandbox: Sandbox) { }\n\n  /**\n   * Call the required actions for the provided run and return their outputs.\n   * \n   * @param run OpenAI run object from `openai.beta.threads.runs.retrieve` or `openai.beta.threads.runs.retrieve.create` call that contains the names of the required actions and their arguments.\n   * @returns The outputs of the required actions in the run.\n   */\n  async run(run: Run): Promise<RunSubmitToolOutputsParams.ToolOutput[]> {\n    if (run.status !== 'requires_action') {\n      return []\n    }\n\n    if (!run.required_action) {\n      return []\n    }\n\n    const outputs: RunSubmitToolOutputsParams.ToolOutput[] = []\n\n    for (const toolCall of run.required_action.submit_tool_outputs.tool_calls) {\n      const action = this.sandbox._actions.get(toolCall.function.name)\n      if (!action) {\n        console.warn(`Action ${toolCall.function.name} not found`)\n        continue\n      }\n\n      const args = JSON.parse(toolCall.function.arguments)\n      const output = await action(this.sandbox, args)\n\n      outputs.push({\n        tool_call_id: toolCall.id,\n        output,\n      })\n    }\n\n    return outputs\n  }\n}\n", "import { Sandbox } from './sandbox'\n\nexport enum CodeRuntime {\n  Node16 = 'Node16',\n  Python3 = 'Python3',\n  Bash = 'Bash',\n  Python3_DataAnalysis = 'Python3-DataAnalysis',\n}\n\n/**\n * Run code in a sandboxed cloud playground.\n * `runCode` wraps the `Sandbox` class and provides a simple interface for running code in a sandboxed environment\n * without any need to manage lifecycle of the sandbox.\n * `runCode` automatically loads the E2B API key from the `E2B_API_KEY` environment variable.\n *\n * @param runtime The runtime to use when running the code. Can be one of the following:\n * - \"Node16\"\n * - \"Python3\"\n *\n * **Let us know if you need support for other runtimes.**\n * @param code The code to run\n * @param opts Optional parameters to pass\n * @returns\n */\nexport async function runCode(\n  runtime: CodeRuntime,\n  code: string,\n  opts?: { apiKey?: string },\n) {\n  let binary = ''\n  let filepath = ''\n  let envID = ''\n  switch (runtime) {\n    case CodeRuntime.Node16:\n      envID = 'base'\n      binary = 'node'\n      filepath = '/index.js'\n      break\n    case CodeRuntime.Python3:\n      envID = 'base'\n      binary = 'python3'\n      filepath = '/main.py'\n      break\n    case CodeRuntime.Python3_DataAnalysis:\n      envID = 'Python3-DataAnalysis'\n      binary = 'python3'\n      filepath = '/main.py'\n      break\n    case CodeRuntime.Bash:\n      envID = 'base'\n      binary = 'bash'\n      filepath = '/main.sh'\n      break\n    default:\n      throw new Error(\n        `The \"${runtime}\" runtime isn't supported. Please contact us (hello@e2b.dev) if you need support for this runtime`,\n      )\n  }\n\n  const sandbox = await Sandbox.create({\n    template: envID,\n    apiKey: opts?.apiKey || process?.env?.E2B_API_KEY || '', // Sandbox.create will throw an error if the API key is not provided so no need to check here\n  })\n\n  await sandbox.filesystem.write(filepath, code)\n\n  const out = await sandbox.process.startAndWait(`${binary} ${filepath}`)\n\n  await sandbox.close()\n\n  return {\n    stdout: out.stdout,\n    stderr: out.stderr,\n  }\n}\n", "import { Sandbox, SandboxOpts } from '../sandbox'\nimport type { ProcessOpts } from '../sandbox/process'\nimport { FilesystemEvent, FilesystemOperation } from '../sandbox/filesystemWatcher'\n\nexport class Artifact<S extends DataAnalysis> {\n  readonly path: string\n  readonly _sandbox: S\n\n  constructor(path: string, sandbox: S) {\n    this.path = path\n    this._sandbox = sandbox\n  }\n}\n\nexport interface RunPythonOpts<S extends DataAnalysis> extends Omit<ProcessOpts, 'cmd'> {\n  onArtifact?: (artifact: Artifact<S>) => Promise<void> | void;\n}\n\nexport class DataAnalysis extends Sandbox {\n  private static template = 'Python3-DataAnalysis'\n\n  /**\n   * Use `DataAnalysis.create()` instead.\n   * \n   * @hidden\n   * @hide\n   * @internal\n   * @access protected\n   */\n  constructor(opts: SandboxOpts) {\n    super({ template: opts.template || DataAnalysis.template, ...opts })\n  }\n\n  /**\n   * Creates a new Sandbox from the template.\n   * @returns New Sandbox\n   */\n  static override async create(): Promise<DataAnalysis>;\n  /**\n   * Creates a new Sandbox from the specified options.\n   * @param opts Sandbox options\n   * @returns New Sandbox\n   */\n  static override async create(opts: SandboxOpts): Promise<DataAnalysis>;\n  static override async create(opts?: SandboxOpts) {\n    const sandbox = new DataAnalysis({ ...opts ? opts : {} })\n    await sandbox._open({ timeout: opts?.timeout })\n\n    return sandbox\n  }\n\n  async runPython(code: string, opts: RunPythonOpts<this> = {}): Promise<{\n    stdout: string;\n    stderr: string;\n    artifacts: Artifact<DataAnalysis>[];\n  }> {\n    const artifacts: string[] = []\n\n    const registerArtifacts = async (event: FilesystemEvent) => {\n      if (event.operation === FilesystemOperation.Create) {\n        const artifact = new Artifact<this>(event.path, this)\n        artifacts.push(event.path)\n        await opts.onArtifact?.(artifact)\n      }\n    }\n\n    const watcher = this.filesystem.watchDir('/home/user/artifacts')\n    watcher.addEventListener(registerArtifacts)\n    await watcher.start()\n\n    const currentEpoch = new Date().getTime()\n    const codefilePath = `/tmp/main-${currentEpoch}.py`\n    await this.filesystem.write(codefilePath, code)\n    const output = await this.process.startAndWait({\n      cmd: `python ${codefilePath}`,\n      ...opts,\n    })\n\n    await watcher.stop()\n\n    return {\n      stdout: output.stdout,\n      stderr: output.stderr,\n      artifacts: artifacts.map((artifact) => new Artifact<this>(artifact, this)),\n    }\n  }\n\n  async installPythonPackages(packageNames: string | string[]) {\n    await this.installPackages('pip install', packageNames)\n  }\n\n  async installSystemPackages(packageNames: string | string[]) {\n    await this.installPackages('sudo apt-get install -y', packageNames)\n  }\n\n  private async installPackages(command: string, packageNames: string | string[]) {\n    if (Array.isArray(packageNames)) {\n      packageNames = packageNames.join(' ')\n    }\n\n    packageNames = packageNames.trim()\n    if (packageNames.length === 0) {\n      return\n    }\n\n    const out = await this.process.startAndWait(`${command} ${packageNames}`)\n\n    if (out.exitCode !== 0) {\n      throw new Error(`Failed to install package ${packageNames}: ${out.stderr}`)\n    }\n  }\n}\n", "import { task } from '@trigger.dev/sdk/v3'\nimport { Sandbox } from '@e2b/sdk'\n\nexport const runCommandTask = task({\n  id: 'run-command',\n  run: async (payload: {\n    command: string\n    args: string[]\n    sandboxId: string\n  }) => {\n    try {\n      const sandbox = await Sandbox.reconnect(payload.sandboxId)\n\n      const fullCommand = `${payload.command} ${payload.args.join(' ')}`\n      console.log(`Executing E2B: ${fullCommand}`)\n\n      const result = await sandbox.commands.run(fullCommand)\n\n      return {\n        stdout: result.stdout,\n        stderr: result.stderr,\n        exitCode: result.exitCode,\n      }\n    } catch (error: any) {\n      console.error('E2B Execution failed:', error)\n      return {\n        stdout: '',\n        stderr: error.message,\n        exitCode: 1,\n      }\n    }\n  },\n})\n"],
  "mappings": "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",
  "names": ["value", "fetch", "version", "platform", "data", "key", "err", "protocol", "Sandbox", "__toESM", "_a", "platform", "FilesystemOperation", "path", "IWebSocket", "id", "method", "params", "err", "opts", "normalizePath", "_0", "onData", "size", "onExit", "envVars", "cmd", "cwd", "terminalID", "_b", "process", "CodeRuntime"]
}
