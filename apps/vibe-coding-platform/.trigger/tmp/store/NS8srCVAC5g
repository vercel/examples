{
  "version": 3,
  "sources": ["../../../../../../../../../trigger/run-command.ts"],
  "sourcesContent": ["import { task } from '@trigger.dev/sdk/v3'\nimport { exec } from 'child_process'\nimport { promisify } from 'util'\nimport fs from 'fs/promises'\nimport path from 'path'\n\nconst execAsync = promisify(exec)\n\nexport const runCommandTask = task({\n  id: 'run-command',\n  run: async (payload: {\n    command: string\n    args: string[]\n    files: Record<string, string>\n  }) => {\n    const workDir = path.join('/tmp', `vibe-run-${Date.now()}`)\n    await fs.mkdir(workDir, { recursive: true })\n\n    try {\n      // Write files to the temporary work directory\n      for (const [filePath, content] of Object.entries(payload.files)) {\n        const fullPath = path.join(workDir, filePath)\n        await fs.mkdir(path.dirname(fullPath), { recursive: true })\n        await fs.writeFile(fullPath, content, 'utf8')\n      }\n\n      const fullCommand = `${payload.command} ${payload.args.join(' ')}`\n      console.log(`Executing: ${fullCommand} in ${workDir}`)\n\n      // We use a shell-like execution\n      const { stdout, stderr } = await execAsync(fullCommand, {\n        cwd: workDir,\n        env: { ...process.env, PROJECT_ROOT: workDir },\n      })\n\n      return {\n        stdout,\n        stderr,\n        exitCode: 0,\n      }\n    } catch (error: any) {\n      console.error('Execution failed:', error)\n      return {\n        stdout: error.stdout || '',\n        stderr: error.stderr || error.message,\n        exitCode: error.code || 1,\n      }\n    }\n  },\n})\n"],
  "mappings": ";;;;;;;;;;AAAA;AACA,SAAS,YAAY;AACrB,SAAS,iBAAiB;AAC1B,OAAO,QAAQ;AACf,OAAO,UAAU;AAEjB,IAAM,YAAY,UAAU,IAAI;AAEzB,IAAM,iBAAiB,KAAK;AAAA,EACjC,IAAI;AAAA,EACJ,KAAK,8BAAO,YAIN;AACJ,UAAM,UAAU,KAAK,KAAK,QAAQ,YAAY,KAAK,IAAI,CAAC,EAAE;AAC1D,UAAM,GAAG,MAAM,SAAS,EAAE,WAAW,KAAK,CAAC;AAE3C,QAAI;AAEF,iBAAW,CAAC,UAAU,OAAO,KAAK,OAAO,QAAQ,QAAQ,KAAK,GAAG;AAC/D,cAAM,WAAW,KAAK,KAAK,SAAS,QAAQ;AAC5C,cAAM,GAAG,MAAM,KAAK,QAAQ,QAAQ,GAAG,EAAE,WAAW,KAAK,CAAC;AAC1D,cAAM,GAAG,UAAU,UAAU,SAAS,MAAM;AAAA,MAC9C;AAEA,YAAM,cAAc,GAAG,QAAQ,OAAO,IAAI,QAAQ,KAAK,KAAK,GAAG,CAAC;AAChE,cAAQ,IAAI,cAAc,WAAW,OAAO,OAAO,EAAE;AAGrD,YAAM,EAAE,QAAQ,OAAO,IAAI,MAAM,UAAU,aAAa;AAAA,QACtD,KAAK;AAAA,QACL,KAAK,EAAE,GAAG,QAAQ,KAAK,cAAc,QAAQ;AAAA,MAC/C,CAAC;AAED,aAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA,UAAU;AAAA,MACZ;AAAA,IACF,SAAS,OAAY;AACnB,cAAQ,MAAM,qBAAqB,KAAK;AACxC,aAAO;AAAA,QACL,QAAQ,MAAM,UAAU;AAAA,QACxB,QAAQ,MAAM,UAAU,MAAM;AAAA,QAC9B,UAAU,MAAM,QAAQ;AAAA,MAC1B;AAAA,IACF;AAAA,EACF,GAtCK;AAuCP,CAAC;",
  "names": []
}
